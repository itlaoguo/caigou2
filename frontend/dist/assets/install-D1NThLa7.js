import{n as ot,R as rt,g as nt,b as pt,p as gt,_ as at,C as ct,e as T,t as st,c as mt,d as _t,f as H,h as k,j as B,k as wt,l as y,m as D,o as ht,q as yt,r as lt,s as Tt,Z as xt,v as Ct,w as St,x as V,y as I,z as bt,A as U,B as Mt,T as Y,D as j,E as Z,F as kt,G as It,H as Dt,I as q,J as G,K as Ot,L as Bt,M as Rt,N as A,O as Q,u as zt,P as $}from"./installCanvasRenderer-jY-EmqBn.js";import{r as At,f as Ht,g as Lt,a as Pt,u as Xt,i as Yt}from"./install-B7QLEEXo.js";function ae(o,t,e){var i=t.getBoxLayoutParams(),n=t.get("padding"),r={width:e.getWidth(),height:e.getHeight()},a=nt(i,r,n);pt(t.get("orient"),o,t.get("itemGap"),a.width,a.height),gt(o,i,r,n)}function se(o,t){var e=ot(t.get("padding")),i=t.getItemStyle(["color","opacity"]);return i.fill=t.get("backgroundColor"),o=new rt({shape:{x:o.x-e[3],y:o.y-e[0],width:o.width+e[1]+e[3],height:o.height+e[0]+e[2],r:t.get("borderRadius")},style:i,silent:!0,z2:-1}),o}var Nt=function(o){at(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.type=t.type,e}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(ct);function dt(o){var t=o.get("confine");return t!=null?!!t:o.get("renderMode")==="richText"}function ft(o){if(T.domSupported){for(var t=document.documentElement.style,e=0,i=o.length;e<i;e++)if(o[e]in t)return o[e]}}var ut=ft(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Wt=ft(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function vt(o,t){if(!o)return t;t=st(t,!0);var e=o.indexOf(t);return o=e===-1?t:"-"+o.slice(0,e)+"-"+t,o.toLowerCase()}function Ft(o,t){var e=o.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(o);return e?e[t]:null}var Vt=vt(Wt,"transition"),N=vt(ut,"transform"),Ut="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(T.transform3dSupported?"will-change:transform;":"");function jt(o){return o=o==="left"?"right":o==="right"?"left":o==="top"?"bottom":"top",o}function Zt(o,t,e){if(!k(e)||e==="inside")return"";var i=o.get("backgroundColor"),n=o.get("borderWidth");t=H(t);var r=jt(e),a=Math.max(Math.round(n)*1.5,6),s="",h=N+":",l;yt(["left","right"],r)>-1?(s+="top:50%",h+="translateY(-50%) rotate("+(l=r==="left"?-225:-45)+"deg)"):(s+="left:50%",h+="translateX(-50%) rotate("+(l=r==="top"?225:45)+"deg)");var d=l*Math.PI/180,f=a+n,u=f*Math.abs(Math.cos(d))+f*Math.abs(Math.sin(d)),v=Math.round(((u-Math.SQRT2*n)/2+Math.SQRT2*n-(u-f)/2)*100)/100;s+=";"+r+":-"+v+"px";var c=t+" solid "+n+"px;",p=["position:absolute;width:"+a+"px;height:"+a+"px;z-index:-1;",s+";"+h+";","border-bottom:"+c,"border-right:"+c,"background-color:"+i+";"];return'<div style="'+p.join("")+'"></div>'}function qt(o,t){var e="cubic-bezier(0.23,1,0.32,1)",i=" "+o/2+"s "+e,n="opacity"+i+",visibility"+i;return t||(i=" "+o+"s "+e,n+=T.transformSupported?","+N+i:",left"+i+",top"+i),Vt+":"+n}function E(o,t,e){var i=o.toFixed(0)+"px",n=t.toFixed(0)+"px";if(!T.transformSupported)return e?"top:"+n+";left:"+i+";":[["top",n],["left",i]];var r=T.transform3dSupported,a="translate"+(r?"3d":"")+"("+i+","+n+(r?",0":"")+")";return e?"top:0;left:0;"+N+":"+a+";":[["top",0],["left",0],[ut,a]]}function Gt(o){var t=[],e=o.get("fontSize"),i=o.getTextColor();i&&t.push("color:"+i),t.push("font:"+o.getFont()),e&&t.push("line-height:"+Math.round(e*3/2)+"px");var n=o.get("textShadowColor"),r=o.get("textShadowBlur")||0,a=o.get("textShadowOffsetX")||0,s=o.get("textShadowOffsetY")||0;return n&&r&&t.push("text-shadow:"+a+"px "+s+"px "+r+"px "+n),y(["decoration","align"],function(h){var l=o.get(h);l&&t.push("text-"+h+":"+l)}),t.join(";")}function Qt(o,t,e){var i=[],n=o.get("transitionDuration"),r=o.get("backgroundColor"),a=o.get("shadowBlur"),s=o.get("shadowColor"),h=o.get("shadowOffsetX"),l=o.get("shadowOffsetY"),d=o.getModel("textStyle"),f=ht(o,"html"),u=h+"px "+l+"px "+a+"px "+s;return i.push("box-shadow:"+u),t&&n&&i.push(qt(n,e)),r&&i.push("background-color:"+r),y(["width","color","radius"],function(v){var c="border-"+v,p=st(c),_=o.get(p);_!=null&&i.push(c+":"+_+(v==="color"?"":"px"))}),i.push(Gt(d)),f!=null&&i.push("padding:"+ot(f).join("px ")+"px"),i.join(";")+";"}function J(o,t,e,i,n){var r=t&&t.painter;if(e){var a=r&&r.getViewportRoot();a&&_t(o,a,document.body,i,n)}else{o[0]=i,o[1]=n;var s=r&&r.getViewportRootOffset();s&&(o[0]+=s.offsetLeft,o[1]+=s.offsetTop)}o[2]=o[0]/t.getWidth(),o[3]=o[1]/t.getHeight()}var $t=function(){function o(t,e,i){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,T.wxa)return null;var n=document.createElement("div");n.domBelongToZr=!0,this.el=n;var r=this._zr=e.getZr(),a=this._appendToBody=i&&i.appendToBody;J(this._styleCoord,r,a,e.getWidth()/2,e.getHeight()/2),a?document.body.appendChild(n):t.appendChild(n),this._container=t;var s=this;n.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},n.onmousemove=function(h){if(h=h||window.event,!s._enterable){var l=r.handler,d=r.painter.getViewportRoot();mt(d,h,!0),l.dispatch("mousemove",h)}},n.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return o.prototype.update=function(t){var e=this._container,i=Ft(e,"position"),n=e.style;n.position!=="absolute"&&i!=="absolute"&&(n.position="relative");var r=t.get("alwaysShowContent");r&&this._moveIfResized(),this._alwaysShowContent=r,this.el.className=t.get("className")||""},o.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var i=this.el,n=i.style,r=this._styleCoord;i.innerHTML?n.cssText=Ut+Qt(t,!this._firstShow,this._longHide)+E(r[0],r[1],!0)+("border-color:"+H(e)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):n.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},o.prototype.setContent=function(t,e,i,n,r){var a=this.el;if(t==null){a.innerHTML="";return}var s="";if(k(r)&&i.get("trigger")==="item"&&!dt(i)&&(s=Zt(i,n,r)),k(t))a.innerHTML=t+s;else if(t){a.innerHTML="",B(t)||(t=[t]);for(var h=0;h<t.length;h++)wt(t[h])&&t[h].parentNode!==a&&a.appendChild(t[h]);if(s&&a.childNodes.length){var l=document.createElement("div");l.innerHTML=s,a.appendChild(l)}}},o.prototype.setEnterable=function(t){this._enterable=t},o.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},o.prototype.moveTo=function(t,e){var i=this._styleCoord;if(J(i,this._zr,this._appendToBody,t,e),i[0]!=null&&i[1]!=null){var n=this.el.style,r=E(i[0],i[1]);y(r,function(a){n[a[0]]=a[1]})}},o.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},o.prototype.hide=function(){var t=this,e=this.el.style;e.visibility="hidden",e.opacity="0",T.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},o.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(D(this.hide,this),t)):this.hide())},o.prototype.isShow=function(){return this._show},o.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},o}(),Et=function(){function o(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),tt(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return o.prototype.update=function(t){var e=t.get("alwaysShowContent");e&&this._moveIfResized(),this._alwaysShowContent=e},o.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},o.prototype.setContent=function(t,e,i,n,r){var a=this;lt(t)&&Tt(""),this.el&&this._zr.remove(this.el);var s=i.getModel("textStyle");this.el=new xt({style:{rich:e.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:n,textShadowColor:s.get("textShadowColor"),fill:i.get(["textStyle","color"]),padding:ht(i,"richText"),verticalAlign:"top",align:"left"},z:i.get("z")}),y(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(l){a.el.style[l]=i.get(l)}),y(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(l){a.el.style[l]=s.get(l)||0}),this._zr.add(this.el);var h=this;this.el.on("mouseover",function(){h._enterable&&(clearTimeout(h._hideTimeout),h._show=!0),h._inContent=!0}),this.el.on("mouseout",function(){h._enterable&&h._show&&h.hideLater(h._hideDelay),h._inContent=!1})},o.prototype.setEnterable=function(t){this._enterable=t},o.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),i=K(t.style);return[e.width+i.left+i.right,e.height+i.top+i.bottom]},o.prototype.moveTo=function(t,e){var i=this.el;if(i){var n=this._styleCoord;tt(n,this._zr,t,e),t=n[0],e=n[1];var r=i.style,a=b(r.borderWidth||0),s=K(r);i.x=t+a+s.left,i.y=e+a+s.top,i.markRedraw()}},o.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},o.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},o.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(D(this.hide,this),t)):this.hide())},o.prototype.isShow=function(){return this._show},o.prototype.dispose=function(){this._zr.remove(this.el)},o}();function b(o){return Math.max(0,o)}function K(o){var t=b(o.shadowBlur||0),e=b(o.shadowOffsetX||0),i=b(o.shadowOffsetY||0);return{left:b(t-e),right:b(t+e),top:b(t-i),bottom:b(t+i)}}function tt(o,t,e,i){o[0]=e,o[1]=i,o[2]=o[0]/t.getWidth(),o[3]=o[1]/t.getHeight()}var Jt=new rt({shape:{x:-1,y:-1,width:2,height:2}}),Kt=function(o){at(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,i){if(!(T.node||!i.getDom())){var n=e.getComponent("tooltip"),r=this._renderMode=Ct(n.get("renderMode"));this._tooltipContent=r==="richText"?new Et(i):new $t(i.getDom(),i,{appendToBody:n.get("appendToBody",!0)})}},t.prototype.render=function(e,i,n){if(!(T.node||!n.getDom())){this.group.removeAll(),this._tooltipModel=e,this._ecModel=i,this._api=n;var r=this._tooltipContent;r.update(e),r.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&e.get("transitionDuration")?St(this,"_updatePosition",50,"fixRate"):V(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var e=this._tooltipModel,i=e.get("triggerOn");At("itemTooltip",this._api,D(function(n,r,a){i!=="none"&&(i.indexOf(n)>=0?this._tryShow(r,a):n==="leave"&&this._hide(a))},this))},t.prototype._keepShow=function(){var e=this._tooltipModel,i=this._ecModel,n=this._api,r=e.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&r!=="none"&&r!=="click"){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&a.manuallyShowTip(e,i,n,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(e,i,n,r){if(!(r.from===this.uid||T.node||!n.getDom())){var a=et(r,n);this._ticket="";var s=r.dataByCoordSys,h=oe(r,i,n);if(h){var l=h.el.getBoundingRect().clone();l.applyTransform(h.el.transform),this._tryShow({offsetX:l.x+l.width/2,offsetY:l.y+l.height/2,target:h.el,position:r.position,positionDefault:"bottom"},a)}else if(r.tooltip&&r.x!=null&&r.y!=null){var d=Jt;d.x=r.x,d.y=r.y,d.update(),I(d).tooltipConfig={name:null,option:r.tooltip},this._tryShow({offsetX:r.x,offsetY:r.y,target:d},a)}else if(s)this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,dataByCoordSys:s,tooltipOption:r.tooltipOption},a);else if(r.seriesIndex!=null){if(this._manuallyAxisShowTip(e,i,n,r))return;var f=Ht(r,i),u=f.point[0],v=f.point[1];u!=null&&v!=null&&this._tryShow({offsetX:u,offsetY:v,target:f.el,position:r.position,positionDefault:"bottom"},a)}else r.x!=null&&r.y!=null&&(n.dispatchAction({type:"updateAxisPointer",x:r.x,y:r.y}),this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,target:n.getZr().findHover(r.x,r.y).target},a))}},t.prototype.manuallyHideTip=function(e,i,n,r){var a=this._tooltipContent;this._tooltipModel&&a.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,r.from!==this.uid&&this._hide(et(r,n))},t.prototype._manuallyAxisShowTip=function(e,i,n,r){var a=r.seriesIndex,s=r.dataIndex,h=i.getComponent("axisPointer").coordSysAxesInfo;if(!(a==null||s==null||h==null)){var l=i.getSeriesByIndex(a);if(l){var d=l.getData(),f=O([d.getItemModel(s),l,(l.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return n.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:s,position:r.position}),!0}}},t.prototype._tryShow=function(e,i){var n=e.target,r=this._tooltipModel;if(r){this._lastX=e.offsetX,this._lastY=e.offsetY;var a=e.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,e);else if(n){this._lastDataByCoordSys=null;var s,h;bt(n,function(l){if(I(l).dataIndex!=null)return s=l,!0;if(I(l).tooltipConfig!=null)return h=l,!0},!0),s?this._showSeriesItemTooltip(e,s,i):h?this._showComponentItemTooltip(e,h,i):this._hide(i)}else this._lastDataByCoordSys=null,this._hide(i)}},t.prototype._showOrMove=function(e,i){var n=e.get("showDelay");i=D(i,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(i,n):i()},t.prototype._showAxisTooltip=function(e,i){var n=this._ecModel,r=this._tooltipModel,a=[i.offsetX,i.offsetY],s=O([i.tooltipOption],r),h=this._renderMode,l=[],d=U("section",{blocks:[],noHeader:!0}),f=[],u=new Y;y(e,function(w){y(w.dataByAxis,function(m){var x=n.getComponent(m.axisDim+"Axis",m.axisIndex),S=m.value;if(!(!x||S==null)){var M=Lt(S,x.axis,n,m.seriesDataIndices,m.valueLabelOpt),R=U("section",{header:M,noHeader:!Mt(M),sortBlocks:!0,blocks:[]});d.blocks.push(R),y(m.seriesDataIndices,function(z){var L=n.getSeriesByIndex(z.seriesIndex),W=z.dataIndexInside,C=L.getDataParams(W);if(!(C.dataIndex<0)){C.axisDim=m.axisDim,C.axisIndex=m.axisIndex,C.axisType=m.axisType,C.axisId=m.axisId,C.axisValue=Pt(x.axis,{value:S}),C.axisValueLabel=M,C.marker=u.makeTooltipMarker("item",H(C.color),h);var P=j(L.formatTooltip(W,!0,null)),X=P.frag;if(X){var F=O([L],r).get("valueFormatter");R.blocks.push(F?Q({valueFormatter:F},X):X)}P.text&&f.push(P.text),l.push(C)}})}})}),d.blocks.reverse(),f.reverse();var v=i.position,c=s.get("order"),p=Z(d,u,h,c,n.get("useUTC"),s.get("textStyle"));p&&f.unshift(p);var _=h==="richText"?`

`:"<br/>",g=f.join(_);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(e,l)?this._updatePosition(s,v,a[0],a[1],this._tooltipContent,l):this._showTooltipContent(s,g,l,Math.random()+"",a[0],a[1],v,null,u)})},t.prototype._showSeriesItemTooltip=function(e,i,n){var r=this._ecModel,a=I(i),s=a.seriesIndex,h=r.getSeriesByIndex(s),l=a.dataModel||h,d=a.dataIndex,f=a.dataType,u=l.getData(f),v=this._renderMode,c=e.positionDefault,p=O([u.getItemModel(d),l,h&&(h.coordinateSystem||{}).model],this._tooltipModel,c?{position:c}:null),_=p.get("trigger");if(!(_!=null&&_!=="item")){var g=l.getDataParams(d,f),w=new Y;g.marker=w.makeTooltipMarker("item",H(g.color),v);var m=j(l.formatTooltip(d,!1,f)),x=p.get("order"),S=p.get("valueFormatter"),M=m.frag,R=M?Z(S?Q({valueFormatter:S},M):M,w,v,x,r.get("useUTC"),p.get("textStyle")):m.text,z="item_"+l.name+"_"+d;this._showOrMove(p,function(){this._showTooltipContent(p,R,g,z,e.offsetX,e.offsetY,e.position,e.target,w)}),n({type:"showTip",dataIndexInside:d,dataIndex:u.getRawIndex(d),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(e,i,n){var r=I(i),a=r.tooltipConfig,s=a.option||{};if(k(s)){var h=s;s={content:h,formatter:h}}var l=[s],d=this._ecModel.getComponent(r.componentMainType,r.componentIndex);d&&l.push(d),l.push({formatter:s.content});var f=e.positionDefault,u=O(l,this._tooltipModel,f?{position:f}:null),v=u.get("content"),c=Math.random()+"",p=new Y;this._showOrMove(u,function(){var _=kt(u.get("formatterParams")||{});this._showTooltipContent(u,v,_,c,e.offsetX,e.offsetY,e.position,i,p)}),n({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(e,i,n,r,a,s,h,l,d){if(this._ticket="",!(!e.get("showContent")||!e.get("show"))){var f=this._tooltipContent;f.setEnterable(e.get("enterable"));var u=e.get("formatter");h=h||e.get("position");var v=i,c=this._getNearestPoint([a,s],n,e.get("trigger"),e.get("borderColor")),p=c.color;if(u)if(k(u)){var _=e.ecModel.get("useUTC"),g=B(n)?n[0]:n,w=g&&g.axisType&&g.axisType.indexOf("time")>=0;v=u,w&&(v=It(g.axisValue,v,_)),v=Dt(v,n,!0)}else if(q(u)){var m=D(function(x,S){x===this._ticket&&(f.setContent(S,d,e,p,h),this._updatePosition(e,h,a,s,f,n,l))},this);this._ticket=r,v=u(n,r,m)}else v=u;f.setContent(v,d,e,p,h),f.show(e,p),this._updatePosition(e,h,a,s,f,n,l)}},t.prototype._getNearestPoint=function(e,i,n,r){if(n==="axis"||B(i))return{color:r||(this._renderMode==="html"?"#fff":"none")};if(!B(i))return{color:r||i.color||i.borderColor}},t.prototype._updatePosition=function(e,i,n,r,a,s,h){var l=this._api.getWidth(),d=this._api.getHeight();i=i||e.get("position");var f=a.getSize(),u=e.get("align"),v=e.get("verticalAlign"),c=h&&h.getBoundingRect().clone();if(h&&c.applyTransform(h.transform),q(i)&&(i=i([n,r],s,a.el,c,{viewSize:[l,d],contentSize:f.slice()})),B(i))n=G(i[0],l),r=G(i[1],d);else if(lt(i)){var p=i;p.width=f[0],p.height=f[1];var _=nt(p,{width:l,height:d});n=_.x,r=_.y,u=null,v=null}else if(k(i)&&h){var g=ie(i,c,f,e.get("borderWidth"));n=g[0],r=g[1]}else{var g=te(n,r,a,l,d,u?null:20,v?null:20);n=g[0],r=g[1]}if(u&&(n-=it(u)?f[0]/2:u==="right"?f[0]:0),v&&(r-=it(v)?f[1]/2:v==="bottom"?f[1]:0),dt(e)){var g=ee(n,r,a,l,d);n=g[0],r=g[1]}a.moveTo(n,r)},t.prototype._updateContentNotChangedOnAxis=function(e,i){var n=this._lastDataByCoordSys,r=this._cbParamsList,a=!!n&&n.length===e.length;return a&&y(n,function(s,h){var l=s.dataByAxis||[],d=e[h]||{},f=d.dataByAxis||[];a=a&&l.length===f.length,a&&y(l,function(u,v){var c=f[v]||{},p=u.seriesDataIndices||[],_=c.seriesDataIndices||[];a=a&&u.value===c.value&&u.axisType===c.axisType&&u.axisId===c.axisId&&p.length===_.length,a&&y(p,function(g,w){var m=_[w];a=a&&g.seriesIndex===m.seriesIndex&&g.dataIndex===m.dataIndex}),r&&y(u.seriesDataIndices,function(g){var w=g.seriesIndex,m=i[w],x=r[w];m&&x&&x.data!==m.data&&(a=!1)})})}),this._lastDataByCoordSys=e,this._cbParamsList=i,!!a},t.prototype._hide=function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},t.prototype.dispose=function(e,i){T.node||!i.getDom()||(V(this,"_updatePosition"),this._tooltipContent.dispose(),Xt("itemTooltip",i))},t.type="tooltip",t}(Ot);function O(o,t,e){var i=t.ecModel,n;e?(n=new A(e,i,i),n=new A(t.option,n,i)):n=t;for(var r=o.length-1;r>=0;r--){var a=o[r];a&&(a instanceof A&&(a=a.get("tooltip",!0)),k(a)&&(a={formatter:a}),a&&(n=new A(a,n,i)))}return n}function et(o,t){return o.dispatchAction||D(t.dispatchAction,t)}function te(o,t,e,i,n,r,a){var s=e.getSize(),h=s[0],l=s[1];return r!=null&&(o+h+r+2>i?o-=h+r:o+=r),a!=null&&(t+l+a>n?t-=l+a:t+=a),[o,t]}function ee(o,t,e,i,n){var r=e.getSize(),a=r[0],s=r[1];return o=Math.min(o+a,i)-a,t=Math.min(t+s,n)-s,o=Math.max(o,0),t=Math.max(t,0),[o,t]}function ie(o,t,e,i){var n=e[0],r=e[1],a=Math.ceil(Math.SQRT2*i)+8,s=0,h=0,l=t.width,d=t.height;switch(o){case"inside":s=t.x+l/2-n/2,h=t.y+d/2-r/2;break;case"top":s=t.x+l/2-n/2,h=t.y-r-a;break;case"bottom":s=t.x+l/2-n/2,h=t.y+d+a;break;case"left":s=t.x-n-a,h=t.y+d/2-r/2;break;case"right":s=t.x+l+a,h=t.y+d/2-r/2}return[s,h]}function it(o){return o==="center"||o==="middle"}function oe(o,t,e){var i=Bt(o).queryOptionMap,n=i.keys()[0];if(!(!n||n==="series")){var r=Rt(t,n,i.get(n),{useDefault:!1,enableAll:!1,enableNone:!1}),a=r.models[0];if(a){var s=e.getViewOfComponentModel(a),h;if(s.group.traverse(function(l){var d=I(l).tooltipConfig;if(d&&d.name===o.name)return h=l,!0}),h)return{componentMainType:n,componentIndex:a.componentIndex,el:h}}}}function he(o){zt(Yt),o.registerComponentModel(Nt),o.registerComponentView(Kt),o.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},$),o.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},$)}export{he as i,ae as l,se as m};
