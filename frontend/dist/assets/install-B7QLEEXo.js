import{be as _t,aK as oe,V as U,h as $,U as Be,r as et,bf as Re,aO as V,bg as Pt,bh as se,bi as He,_ as Z,j as J,bj as Fe,G as ze,bk as Ct,bl as Ve,bm as Q,bn as Ge,bo as N,bp as le,bq as ue,br as vt,bs as Dt,W as ce,bt as Mt,bu as Ze,bv as We,X as Bt,bw as ve,bx as fe,by as he,bz as de,bA as ge,bB as pe,bC as Rt,bD as Ke,bE as qe,bF as Ye,bG as Xe,bH as $e,bI as Ue,bJ as Je,bK as je,bL as Qe,I as at,bM as Ht,bN as At,l as w,bO as ta,aP as ea,bP as aa,bQ as na,bR as ra,bS as nt,aH as ia,bT as ye,Y as wt,$ as rt,Z as Lt,a5 as Tt,a6 as oa,y as xe,aL as ht,O as me,aR as be,aS as _e,aV as sa,a8 as la,N as Me,bU as ua,bV as Ae,bW as Ft,bX as dt,a0 as G,F as we,q as ca,K as Se,bY as va,aB as Et,ac as fa,m as Pe,w as ha,x as da,ae as ga,bZ as pa,b_ as ya,b$ as xa,n as ma,aM as ba,c0 as _a,C as Ma,e as Le,b2 as Aa}from"./installCanvasRenderer-jY-EmqBn.js";function wa(a){for(var e=[],t=0;t<a.length;t++){var n=a[t];if(!n.defaultAttr.ignore){var r=n.label,i=r.getComputedTransform(),o=r.getBoundingRect(),s=!i||i[1]<1e-5&&i[2]<1e-5,l=r.style.margin||0,u=o.clone();u.applyTransform(i),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=s?new _t(o,i):null;e.push({label:r,labelLine:n.labelLine,rect:u,localRect:o,obb:c,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:s,transform:i})}}return e}function Te(a,e,t,n,r,i){var o=a.length;if(o<2)return;a.sort(function(b,P){return b.rect[e]-P.rect[e]});for(var s=0,l,u=!1,c=0;c<o;c++){var v=a[c],h=v.rect;l=h[e]-s,l<0&&(h[e]-=l,v.label[e]-=l,u=!0),s=h[e]+h[t]}var f=a[0],d=a[o-1],p,g;y(),p<0&&M(-p,.8),g<0&&M(g,.8),y(),S(p,g,1),S(g,p,-1),y(),p<0&&T(-p),g<0&&T(g);function y(){p=f.rect[e]-n,g=r-d.rect[e]-d.rect[t]}function S(b,P,_){if(b<0){var A=Math.min(P,-b);if(A>0){x(A*_,0,o);var m=A+b;m<0&&M(-m*_,1)}else M(-b*_,1)}}function x(b,P,_){b!==0&&(u=!0);for(var A=P;A<_;A++){var m=a[A],L=m.rect;L[e]+=b,m.label[e]+=b}}function M(b,P){for(var _=[],A=0,m=1;m<o;m++){var L=a[m-1].rect,B=Math.max(a[m].rect[e]-L[e]-L[t],0);_.push(B),A+=B}if(A){var R=Math.min(Math.abs(b)/A,P);if(b>0)for(var m=0;m<o-1;m++){var W=_[m]*R;x(W,0,m+1)}else for(var m=o-1;m>0;m--){var W=_[m-1]*R;x(-W,m,o)}}}function T(b){var P=b<0?-1:1;b=Math.abs(b);for(var _=Math.ceil(b/(o-1)),A=0;A<o-1;A++)if(P>0?x(_,0,A+1):x(-_,o-A-1,o),b-=_,b<=0)return}return u}function zn(a,e,t,n){return Te(a,"x","width",e,t)}function Vn(a,e,t,n){return Te(a,"y","height",e,t)}function Sa(a){var e=[];a.sort(function(p,g){return g.priority-p.priority});var t=new oe(0,0,0,0);function n(p){if(!p.ignore){var g=p.ensureState("emphasis");g.ignore==null&&(g.ignore=!1)}p.ignore=!0}for(var r=0;r<a.length;r++){var i=a[r],o=i.axisAligned,s=i.localRect,l=i.transform,u=i.label,c=i.labelLine;t.copy(i.rect),t.width-=.1,t.height-=.1,t.x+=.05,t.y+=.05;for(var v=i.obb,h=!1,f=0;f<e.length;f++){var d=e[f];if(t.intersect(d.rect)){if(o&&d.axisAligned){h=!0;break}if(d.obb||(d.obb=new _t(d.localRect,d.transform)),v||(v=new _t(s,l)),v.intersect(d.obb)){h=!0;break}}}h?(n(u),c&&n(c)):(u.attr("ignore",i.defaultAttr.ignore),c&&c.attr("ignore",i.defaultAttr.labelGuideIgnore),e.push(i))}}var Pa=0,zt=function(){function a(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++Pa}return a.createByAxisModel=function(e){var t=e.option,n=t.data,r=n&&U(n,La);return new a({categories:r,needCollect:!r,deduplication:t.dedplication!==!1})},a.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},a.prototype.parseAndCollect=function(e){var t,n=this._needCollect;if(!$(e)&&!n)return e;if(n&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var r=this._getOrCreateMap();return t=r.get(e),t==null&&(n?(t=this.categories.length,this.categories[t]=e,r.set(e,t)):t=NaN),t},a.prototype._getOrCreateMap=function(){return this._map||(this._map=Be(this.categories))},a}();function La(a){return et(a)&&a.value!=null?a.value:a+""}var D=function(){function a(e){this._setting=e||{},this._extent=[1/0,-1/0]}return a.prototype.getSetting=function(e){return this._setting[e]},a.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},a.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},a.prototype.getExtent=function(){return this._extent.slice()},a.prototype.setExtent=function(e,t){var n=this._extent;isNaN(e)||(n[0]=e),isNaN(t)||(n[1]=t)},a.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},a.prototype.isBlank=function(){return this._isBlank},a.prototype.setBlank=function(e){this._isBlank=e},a}();Re(D);function Gn(a){return a.type==="interval"||a.type==="log"}function Ta(a,e,t,n){var r={},i=a[1]-a[0],o=r.interval=se(i/e);t!=null&&o<t&&(o=r.interval=t),n!=null&&o>n&&(o=r.interval=n);var s=r.intervalPrecision=Ee(o),l=r.niceTickExtent=[V(Math.ceil(a[0]/o)*o,s),V(Math.floor(a[1]/o)*o,s)];return Ea(l,a),r}function Zn(a){var e=Math.pow(10,He(a)),t=a/e;return t?t===2?t=3:t===3?t=5:t*=2:t=1,V(t*e)}function Ee(a){return Pt(a)+2}function Vt(a,e,t){a[e]=Math.max(Math.min(a[e],t[1]),t[0])}function Ea(a,e){!isFinite(a[0])&&(a[0]=e[0]),!isFinite(a[1])&&(a[1]=e[1]),Vt(a,0,e),Vt(a,1,e),a[0]>a[1]&&(a[0]=a[1])}function gt(a,e){return a>=e[0]&&a<=e[1]}function pt(a,e){return e[1]===e[0]?.5:(a-e[0])/(e[1]-e[0])}function yt(a,e){return a*(e[1]-e[0])+e[0]}var kt=function(a){Z(e,a);function e(t){var n=a.call(this,t)||this;n.type="ordinal";var r=n.getSetting("ordinalMeta");return r||(r=new zt({})),J(r)&&(r=new zt({categories:U(r,function(i){return et(i)?i.value:i})})),n._ordinalMeta=r,n._extent=n.getSetting("extent")||[0,r.categories.length-1],n}return e.prototype.parse=function(t){return t==null?NaN:$(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return t=this.parse(t),gt(t,this._extent)&&this._ordinalMeta.categories[t]!=null},e.prototype.normalize=function(t){return t=this._getTickNumber(this.parse(t)),pt(t,this._extent)},e.prototype.scale=function(t){return t=Math.round(yt(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],n=this._extent,r=n[0];r<=n[1];)t.push({value:r}),r++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(t==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=t.ordinalNumbers,r=this._ordinalNumbersByTick=[],i=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,l=Math.min(s,n.length);o<l;++o){var u=n[o];r[o]=u,i[u]=o}for(var c=0;o<s;++o){for(;i[c]!=null;)c++;r.push(c),i[c]=o}},e.prototype._getTickNumber=function(t){var n=this._ticksByOrdinalNumber;return n&&t>=0&&t<n.length?n[t]:t},e.prototype.getRawOrdinalNumber=function(t){var n=this._ordinalNumbersByTick;return n&&t>=0&&t<n.length?n[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var n=this.getRawOrdinalNumber(t.value),r=this._ordinalMeta.categories[n];return r==null?"":r+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(t,n){this.unionExtent(t.getApproximateExtent(n))},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(D);D.registerClass(kt);var K=V,ot=function(a){Z(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return gt(t,this._extent)},e.prototype.normalize=function(t){return pt(t,this._extent)},e.prototype.scale=function(t){return yt(t,this._extent)},e.prototype.setExtent=function(t,n){var r=this._extent;isNaN(t)||(r[0]=parseFloat(t)),isNaN(n)||(r[1]=parseFloat(n))},e.prototype.unionExtent=function(t){var n=this._extent;t[0]<n[0]&&(n[0]=t[0]),t[1]>n[1]&&(n[1]=t[1]),this.setExtent(n[0],n[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=Ee(t)},e.prototype.getTicks=function(t){var n=this._interval,r=this._extent,i=this._niceExtent,o=this._intervalPrecision,s=[];if(!n)return s;var l=1e4;r[0]<i[0]&&(t?s.push({value:K(i[0]-n,o)}):s.push({value:r[0]}));for(var u=i[0];u<=i[1]&&(s.push({value:u}),u=K(u+n,o),u!==s[s.length-1].value);)if(s.length>l)return[];var c=s.length?s[s.length-1].value:i[1];return r[1]>c&&(t?s.push({value:K(c+n,o)}):s.push({value:r[1]})),s},e.prototype.getMinorTicks=function(t){for(var n=this.getTicks(!0),r=[],i=this.getExtent(),o=1;o<n.length;o++){for(var s=n[o],l=n[o-1],u=0,c=[],v=s.value-l.value,h=v/t;u<t-1;){var f=K(l.value+(u+1)*h);f>i[0]&&f<i[1]&&c.push(f),u++}r.push(c)}return r},e.prototype.getLabel=function(t,n){if(t==null)return"";var r=n&&n.precision;r==null?r=Pt(t.value)||0:r==="auto"&&(r=this._intervalPrecision);var i=K(t.value,r,!0);return Fe(i)},e.prototype.calcNiceTicks=function(t,n,r){t=t||5;var i=this._extent,o=i[1]-i[0];if(isFinite(o)){o<0&&(o=-o,i.reverse());var s=Ta(i,t,n,r);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var n=this._extent;if(n[0]===n[1])if(n[0]!==0){var r=Math.abs(n[0]);t.fixMax||(n[1]+=r/2),n[0]-=r/2}else n[1]=1;var i=n[1]-n[0];isFinite(i)||(n[0]=0,n[1]=1),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var o=this._interval;t.fixMin||(n[0]=K(Math.floor(n[0]/o)*o)),t.fixMax||(n[1]=K(Math.ceil(n[1]/o)*o))},e.prototype.setNiceExtent=function(t,n){this._niceExtent=[t,n]},e.type="interval",e}(D);D.registerClass(ot);var ka=function(a,e,t,n){for(;t<n;){var r=t+n>>>1;a[r][1]<e?t=r+1:n=r}return t},ke=function(a){Z(e,a);function e(t){var n=a.call(this,t)||this;return n.type="time",n}return e.prototype.getLabel=function(t){var n=this.getSetting("useUTC");return ze(t.value,Ct[Ve(Q(this._minLevelUnit))]||Ct.second,n,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,n,r){var i=this.getSetting("useUTC"),o=this.getSetting("locale");return Ge(t,n,r,o,i)},e.prototype.getTicks=function(){var t=this._interval,n=this._extent,r=[];if(!t)return r;r.push({value:n[0],level:0});var i=this.getSetting("useUTC"),o=Ra(this._minLevelUnit,this._approxInterval,i,n);return r=r.concat(o),r.push({value:n[1],level:0}),r},e.prototype.calcNiceExtent=function(t){var n=this._extent;if(n[0]===n[1]&&(n[0]-=N,n[1]+=N),n[1]===-1/0&&n[0]===1/0){var r=new Date;n[1]=+new Date(r.getFullYear(),r.getMonth(),r.getDate()),n[0]=n[1]-N}this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,n,r){t=t||10;var i=this._extent,o=i[1]-i[0];this._approxInterval=o/t,n!=null&&this._approxInterval<n&&(this._approxInterval=n),r!=null&&this._approxInterval>r&&(this._approxInterval=r);var s=st.length,l=Math.min(ka(st,this._approxInterval,0,s),s-1);this._interval=st[l][1],this._minLevelUnit=st[Math.max(l-1,0)][0]},e.prototype.parse=function(t){return ce(t)?t:+Mt(t)},e.prototype.contain=function(t){return gt(this.parse(t),this._extent)},e.prototype.normalize=function(t){return pt(this.parse(t),this._extent)},e.prototype.scale=function(t){return yt(t,this._extent)},e.type="time",e}(ot),st=[["second",le],["minute",ue],["hour",vt],["quarter-day",vt*6],["half-day",vt*12],["day",N*1.2],["half-week",N*3.5],["week",N*7],["month",N*31],["quarter",N*95],["half-year",Dt/2],["year",Dt]];function Ia(a,e,t,n){var r=Mt(e),i=Mt(t),o=function(d){return Rt(r,d,n)===Rt(i,d,n)},s=function(){return o("year")},l=function(){return s()&&o("month")},u=function(){return l()&&o("day")},c=function(){return u()&&o("hour")},v=function(){return c()&&o("minute")},h=function(){return v()&&o("second")},f=function(){return h()&&o("millisecond")};switch(a){case"year":return s();case"month":return l();case"day":return u();case"hour":return c();case"minute":return v();case"second":return h();case"millisecond":return f()}}function Oa(a,e){return a/=N,a>16?16:a>7.5?7:a>3.5?4:a>1.5?2:1}function Na(a){var e=30*N;return a/=e,a>6?6:a>3?3:a>2?2:1}function Ca(a){return a/=vt,a>12?12:a>6?6:a>3.5?4:a>2?2:1}function Gt(a,e){return a/=e?ue:le,a>30?30:a>20?20:a>15?15:a>10?10:a>5?5:a>2?2:1}function Da(a){return se(a)}function Ba(a,e,t){var n=new Date(a);switch(Q(e)){case"year":case"month":n[pe(t)](0);case"day":n[ge(t)](1);case"hour":n[de(t)](0);case"minute":n[he(t)](0);case"second":n[ve(t)](0),n[fe(t)](0)}return n.getTime()}function Ra(a,e,t,n){var r=1e4,i=Ze,o=0;function s(m,L,B,R,W,C,j){for(var X=new Date(L),E=L,I=X[R]();E<B&&E<=n[1];)j.push({value:E}),I+=m,X[W](I),E=X.getTime();j.push({value:E,notAdd:!0})}function l(m,L,B){var R=[],W=!L.length;if(!Ia(Q(m),n[0],n[1],t)){W&&(L=[{value:Ba(new Date(n[0]),m,t)},{value:n[1]}]);for(var C=0;C<L.length-1;C++){var j=L[C].value,X=L[C+1].value;if(j!==X){var E=void 0,I=void 0,F=void 0,Nt=!1;switch(m){case"year":E=Math.max(1,Math.round(e/N/365)),I=Je(t),F=je(t);break;case"half-year":case"quarter":case"month":E=Na(e),I=Ue(t),F=pe(t);break;case"week":case"half-week":case"day":E=Oa(e),I=$e(t),F=ge(t),Nt=!0;break;case"half-day":case"quarter-day":case"hour":E=Ca(e),I=Xe(t),F=de(t);break;case"minute":E=Gt(e,!0),I=Ye(t),F=he(t);break;case"second":E=Gt(e,!1),I=qe(t),F=ve(t);break;case"millisecond":E=Da(e),I=Ke(t),F=fe(t);break}s(E,j,X,I,F,Nt,R),m==="year"&&B.length>1&&C===0&&B.unshift({value:B[0].value-E})}}for(var C=0;C<R.length;C++)B.push(R[C]);return R}}for(var u=[],c=[],v=0,h=0,f=0;f<i.length&&o++<r;++f){var d=Q(i[f]);if(We(i[f])){l(i[f],u[u.length-1]||[],c);var p=i[f+1]?Q(i[f+1]):null;if(d!==p){if(c.length){h=v,c.sort(function(m,L){return m.value-L.value});for(var g=[],y=0;y<c.length;++y){var S=c[y].value;(y===0||c[y-1].value!==S)&&(g.push(c[y]),S>=n[0]&&S<=n[1]&&v++)}var x=(n[1]-n[0])/e;if(v>x*1.5&&h>x/1.5||(u.push(g),v>x||a===i[f]))break}c=[]}}}for(var M=Bt(U(u,function(m){return Bt(m,function(L){return L.value>=n[0]&&L.value<=n[1]&&!L.notAdd})}),function(m){return m.length>0}),T=[],b=M.length-1,f=0;f<M.length;++f)for(var P=M[f],_=0;_<P.length;++_)T.push({value:P[_].value,level:b-f});T.sort(function(m,L){return m.value-L.value});for(var A=[],f=0;f<T.length;++f)(f===0||T[f].value!==T[f-1].value)&&A.push(T[f]);return A}D.registerClass(ke);var Zt=D.prototype,tt=ot.prototype,Ha=V,Fa=Math.floor,za=Math.ceil,lt=Math.pow,O=Math.log,It=function(a){Z(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new ot,t._interval=0,t}return e.prototype.getTicks=function(t){var n=this._originalScale,r=this._extent,i=n.getExtent(),o=tt.getTicks.call(this,t);return U(o,function(s){var l=s.value,u=V(lt(this.base,l));return u=l===r[0]&&this._fixMin?ut(u,i[0]):u,u=l===r[1]&&this._fixMax?ut(u,i[1]):u,{value:u}},this)},e.prototype.setExtent=function(t,n){var r=O(this.base);t=O(Math.max(0,t))/r,n=O(Math.max(0,n))/r,tt.setExtent.call(this,t,n)},e.prototype.getExtent=function(){var t=this.base,n=Zt.getExtent.call(this);n[0]=lt(t,n[0]),n[1]=lt(t,n[1]);var r=this._originalScale,i=r.getExtent();return this._fixMin&&(n[0]=ut(n[0],i[0])),this._fixMax&&(n[1]=ut(n[1],i[1])),n},e.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var n=this.base;t[0]=O(t[0])/O(n),t[1]=O(t[1])/O(n),Zt.unionExtent.call(this,t)},e.prototype.unionExtentFromData=function(t,n){this.unionExtent(t.getApproximateExtent(n))},e.prototype.calcNiceTicks=function(t){t=t||10;var n=this._extent,r=n[1]-n[0];if(!(r===1/0||r<=0)){var i=Qe(r),o=t/r*i;for(o<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0;)i*=10;var s=[V(za(n[0]/i)*i),V(Fa(n[1]/i)*i)];this._interval=i,this._niceExtent=s}},e.prototype.calcNiceExtent=function(t){tt.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return t=O(t)/O(this.base),gt(t,this._extent)},e.prototype.normalize=function(t){return t=O(t)/O(this.base),pt(t,this._extent)},e.prototype.scale=function(t){return t=yt(t,this._extent),lt(this.base,t)},e.type="log",e}(D),Ie=It.prototype;Ie.getMinorTicks=tt.getMinorTicks;Ie.getLabel=tt.getLabel;function ut(a,e){return Ha(a,Pt(e))}D.registerClass(It);var Va=function(){function a(e,t,n){this._prepareParams(e,t,n)}return a.prototype._prepareParams=function(e,t,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var r=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&t.getNeedCrossZero&&t.getNeedCrossZero();var i=this._modelMinRaw=t.get("min",!0);at(i)?this._modelMinNum=ct(e,i({min:n[0],max:n[1]})):i!=="dataMin"&&(this._modelMinNum=ct(e,i));var o=this._modelMaxRaw=t.get("max",!0);if(at(o)?this._modelMaxNum=ct(e,o({min:n[0],max:n[1]})):o!=="dataMax"&&(this._modelMaxNum=ct(e,o)),r)this._axisDataLen=t.getCategories().length;else{var s=t.get("boundaryGap"),l=J(s)?s:[s||0,s||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Ht(l[0],1),Ht(l[1],1)]}},a.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,n=this._dataMax,r=this._axisDataLen,i=this._boundaryGapInner,o=e?null:n-t||Math.abs(t),s=this._modelMinRaw==="dataMin"?t:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,u=s!=null,c=l!=null;s==null&&(s=e?r?0:NaN:t-i[0]*o),l==null&&(l=e?r?r-1:NaN:n+i[1]*o),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var v=At(s)||At(l)||e&&!r;this._needCrossZero&&(s>0&&l>0&&!u&&(s=0),s<0&&l<0&&!c&&(l=0));var h=this._determinedMin,f=this._determinedMax;return h!=null&&(s=h,u=!0),f!=null&&(l=f,c=!0),{min:s,max:l,minFixed:u,maxFixed:c,isBlank:v}},a.prototype.modifyDataMinMax=function(e,t){this[Za[e]]=t},a.prototype.setDeterminedMinMax=function(e,t){var n=Ga[e];this[n]=t},a.prototype.freeze=function(){this.frozen=!0},a}(),Ga={min:"_determinedMin",max:"_determinedMax"},Za={min:"_dataMin",max:"_dataMax"};function Wa(a,e,t){var n=a.rawExtentInfo;return n||(n=new Va(a,e,t),a.rawExtentInfo=n,n)}function ct(a,e){return e==null?null:At(e)?NaN:a.parse(e)}function Ka(a,e){var t=a.type,n=Wa(a,e,a.getExtent()).calculate();a.setBlank(n.isBlank);var r=n.min,i=n.max,o=e.ecModel;if(o&&t==="time"){var s=aa("bar",o),l=!1;if(w(s,function(v){l=l||v.getBaseAxis()===e.axis}),l){var u=na(s),c=qa(r,i,e,u);r=c.min,i=c.max}}return{extent:[r,i],fixMin:n.minFixed,fixMax:n.maxFixed}}function qa(a,e,t,n){var r=t.axis.getExtent(),i=r[1]-r[0],o=ra(n,t.axis);if(o===void 0)return{min:a,max:e};var s=1/0;w(o,function(f){s=Math.min(f.offset,s)});var l=-1/0;w(o,function(f){l=Math.max(f.offset+f.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,c=e-a,v=1-(s+l)/i,h=c/v-c;return e+=h*(l/u),a-=h*(s/u),{min:a,max:e}}function Wn(a,e){var t=e,n=Ka(a,t),r=n.extent,i=t.get("splitNumber");a instanceof It&&(a.base=t.get("logBase"));var o=a.type,s=t.get("interval"),l=o==="interval"||o==="time";a.setExtent(r[0],r[1]),a.calcNiceExtent({splitNumber:i,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:l?t.get("minInterval"):null,maxInterval:l?t.get("maxInterval"):null}),s!=null&&a.setInterval&&a.setInterval(s)}function Kn(a,e){if(e=e||a.get("type"),e)switch(e){case"category":return new kt({ordinalMeta:a.getOrdinalMeta?a.getOrdinalMeta():a.getCategories(),extent:[1/0,-1/0]});case"time":return new ke({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new(D.getClass(e)||ot)}}function qn(a){var e=a.scale.getExtent(),t=e[0],n=e[1];return!(t>0&&n>0||t<0&&n<0)}function Ya(a){var e=a.getLabelModel().get("formatter"),t=a.type==="category"?a.scale.getExtent()[0]:null;return a.scale.type==="time"?function(n){return function(r,i){return a.scale.getFormattedLabel(r,i,n)}}(e):$(e)?function(n){return function(r){var i=a.scale.getLabel(r),o=n.replace("{value}",i??"");return o}}(e):at(e)?function(n){return function(r,i){return t!=null&&(i=r.value-t),n(Oe(a,r),i,r.level!=null?{level:r.level}:null)}}(e):function(n){return a.scale.getLabel(n)}}function Oe(a,e){return a.type==="category"?a.scale.getLabel(e):e.value}function Yn(a){var e=a.model,t=a.scale;if(!(!e.get(["axisLabel","show"])||t.isBlank())){var n,r,i=t.getExtent();t instanceof kt?r=t.count():(n=t.getTicks(),r=n.length);var o=a.getLabelModel(),s=Ya(a),l,u=1;r>40&&(u=Math.ceil(r/40));for(var c=0;c<r;c+=u){var v=n?n[c]:{value:i[0]+c},h=s(v,c),f=o.getTextRect(h),d=Xa(f,o.get("rotate")||0);l?l.union(d):l=d}return l}}function Xa(a,e){var t=e*Math.PI/180,n=a.width,r=a.height,i=n*Math.abs(Math.cos(t))+Math.abs(r*Math.sin(t)),o=n*Math.abs(Math.sin(t))+Math.abs(r*Math.cos(t)),s=new oe(a.x,a.y,i,o);return s}function $a(a){var e=a.get("interval");return e??"auto"}function Ua(a){return a.type==="category"&&$a(a.getLabelModel())===0}function Ja(a,e){var t={};return w(a.mapDimensionsAll(e),function(n){t[ta(a,n)]=!0}),ea(t)}function Xn(a,e,t){e&&w(Ja(e,t),function(n){var r=e.getApproximateExtent(n);r[0]<a[0]&&(a[0]=r[0]),r[1]>a[1]&&(a[1]=r[1])})}function Wt(a,e,t){t=t||{};var n=a.coordinateSystem,r=e.axis,i={},o=r.getAxesOnZeroOf()[0],s=r.position,l=o?"onZero":s,u=r.dim,c=n.getRect(),v=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},f=e.get("offset")||0,d=u==="x"?[v[2]-f,v[3]+f]:[v[0]-f,v[1]+f];if(o){var p=o.toGlobalCoord(o.dataToCoord(0));d[h.onZero]=Math.max(Math.min(p,d[1]),d[0])}i.position=[u==="y"?d[h[l]]:v[0],u==="x"?d[h[l]]:v[3]],i.rotation=Math.PI/2*(u==="x"?0:1);var g={top:-1,bottom:1,left:-1,right:1};i.labelDirection=i.tickDirection=i.nameDirection=g[s],i.labelOffset=o?d[h[s]]-d[h.onZero]:0,e.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),nt(t.labelInside,e.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var y=e.get(["axisLabel","rotate"]);return i.labelRotate=l==="top"?-y:y,i.z2=1,i}function $n(a){return a.get("coordinateSystem")==="cartesian2d"}function Un(a){var e={xAxisModel:null,yAxisModel:null};return w(e,function(t,n){var r=n.replace(/Model$/,""),i=a.getReferringComponents(r,ia).models[0];e[n]=i}),e}var z=Math.PI,Y=function(){function a(e,t){this.group=new wt,this.opt=t,this.axisModel=e,rt(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new wt({x:t.position[0],y:t.position[1],rotation:t.rotation});n.updateTransform(),this._transformGroup=n}return a.prototype.hasBuilder=function(e){return!!Kt[e]},a.prototype.add=function(e){Kt[e](this.opt,this.axisModel,this.group,this._transformGroup)},a.prototype.getGroup=function(){return this.group},a.innerTextLayout=function(e,t,n){var r=ye(t-e),i,o;return dt(r)?(o=n>0?"top":"bottom",i="center"):dt(r-z)?(o=n>0?"bottom":"top",i="center"):(o="middle",r>0&&r<z?i=n>0?"right":"left":i=n>0?"left":"right"),{rotation:r,textAlign:i,textVerticalAlign:o}},a.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},a.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},a}(),Kt={axisLine:function(a,e,t,n){var r=e.get(["axisLine","show"]);if(r==="auto"&&a.handleAutoShown&&(r=a.handleAutoShown("axisLine")),!!r){var i=e.axis.getExtent(),o=n.transform,s=[i[0],0],l=[i[1],0],u=s[0]>l[0];o&&(ht(s,s,o),ht(l,l,o));var c=me({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),v=new be({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:a.strokeContainThreshold||5,silent:!0,z2:1});_e(v.shape,v.style.lineWidth),v.anid="line",t.add(v);var h=e.get(["axisLine","symbol"]);if(h!=null){var f=e.get(["axisLine","symbolSize"]);$(h)&&(h=[h,h]),($(f)||ce(f))&&(f=[f,f]);var d=sa(e.get(["axisLine","symbolOffset"])||0,f),p=f[0],g=f[1];w([{rotate:a.rotation+Math.PI/2,offset:d[0],r:0},{rotate:a.rotation-Math.PI/2,offset:d[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(y,S){if(h[S]!=="none"&&h[S]!=null){var x=la(h[S],-p/2,-g/2,p,g,c.stroke,!0),M=y.r+y.offset,T=u?l:s;x.attr({rotation:y.rotate,x:T[0]+M*Math.cos(a.rotation),y:T[1]-M*Math.sin(a.rotation),silent:!0,z2:11}),t.add(x)}})}}},axisTickLabel:function(a,e,t,n){var r=tn(t,n,e,a),i=an(t,n,e,a);if(Qa(e,i,r),en(t,n,e,a.tickDirection),e.get(["axisLabel","hideOverlap"])){var o=wa(U(i,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));Sa(o)}},axisName:function(a,e,t,n){var r=nt(a.axisName,e.get("name"));if(r){var i=e.get("nameLocation"),o=a.nameDirection,s=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,u=e.axis.getExtent(),c=u[0]>u[1]?-1:1,v=[i==="start"?u[0]-c*l:i==="end"?u[1]+c*l:(u[0]+u[1])/2,Yt(i)?a.labelOffset+o*l:0],h,f=e.get("nameRotate");f!=null&&(f=f*z/180);var d;Yt(i)?h=Y.innerTextLayout(a.rotation,f??a.rotation,o):(h=ja(a.rotation,i,f||0,u),d=a.axisNameAvailableWidth,d!=null&&(d=Math.abs(d/Math.sin(h.rotation)),!isFinite(d)&&(d=null)));var p=s.getFont(),g=e.get("nameTruncate",!0)||{},y=g.ellipsis,S=nt(a.nameTruncateMaxWidth,g.maxWidth,d),x=new Lt({x:v[0],y:v[1],rotation:h.rotation,silent:Y.isLabelSilent(e),style:Tt(s,{text:r,font:p,overflow:"truncate",width:S,ellipsis:y,fill:s.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:s.get("align")||h.textAlign,verticalAlign:s.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(oa({el:x,componentModel:e,itemName:r}),x.__fullText=r,x.anid="name",e.get("triggerEvent")){var M=Y.makeAxisEventDataBase(e);M.targetType="axisName",M.name=r,xe(x).eventData=M}n.add(x),x.updateTransform(),t.add(x),x.decomposeTransform()}}};function ja(a,e,t,n){var r=ye(t-a),i,o,s=n[0]>n[1],l=e==="start"&&!s||e!=="start"&&s;return dt(r-z/2)?(o=l?"bottom":"top",i="center"):dt(r-z*1.5)?(o=l?"top":"bottom",i="center"):(o="middle",r<z*1.5&&r>z/2?i=l?"left":"right":i=l?"right":"left"),{rotation:r,textAlign:i,textVerticalAlign:o}}function Qa(a,e,t){if(!Ua(a.axis)){var n=a.get(["axisLabel","showMinLabel"]),r=a.get(["axisLabel","showMaxLabel"]);e=e||[],t=t||[];var i=e[0],o=e[1],s=e[e.length-1],l=e[e.length-2],u=t[0],c=t[1],v=t[t.length-1],h=t[t.length-2];n===!1?(k(i),k(u)):qt(i,o)&&(n?(k(o),k(c)):(k(i),k(u))),r===!1?(k(s),k(v)):qt(l,s)&&(r?(k(l),k(h)):(k(s),k(v)))}}function k(a){a&&(a.ignore=!0)}function qt(a,e){var t=a&&a.getBoundingRect().clone(),n=e&&e.getBoundingRect().clone();if(!(!t||!n)){var r=ua([]);return Ae(r,r,-a.rotation),t.applyTransform(Ft([],r,a.getLocalTransform())),n.applyTransform(Ft([],r,e.getLocalTransform())),t.intersect(n)}}function Yt(a){return a==="middle"||a==="center"}function Ne(a,e,t,n,r){for(var i=[],o=[],s=[],l=0;l<a.length;l++){var u=a[l].coord;o[0]=u,o[1]=0,s[0]=u,s[1]=t,e&&(ht(o,o,e),ht(s,s,e));var c=new be({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:n,z2:2,autoBatch:!0,silent:!0});_e(c.shape,c.style.lineWidth),c.anid=r+"_"+a[l].tickValue,i.push(c)}return i}function tn(a,e,t,n){var r=t.axis,i=t.getModel("axisTick"),o=i.get("show");if(o==="auto"&&n.handleAutoShown&&(o=n.handleAutoShown("axisTick")),!(!o||r.scale.isBlank())){for(var s=i.getModel("lineStyle"),l=n.tickDirection*i.get("length"),u=r.getTicksCoords(),c=Ne(u,e.transform,l,rt(s.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),v=0;v<c.length;v++)a.add(c[v]);return c}}function en(a,e,t,n){var r=t.axis,i=t.getModel("minorTick");if(!(!i.get("show")||r.scale.isBlank())){var o=r.getMinorTicksCoords();if(o.length)for(var s=i.getModel("lineStyle"),l=n*i.get("length"),u=rt(s.getLineStyle(),rt(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),c=0;c<o.length;c++)for(var v=Ne(o[c],e.transform,l,u,"minorticks_"+c),h=0;h<v.length;h++)a.add(v[h])}}function an(a,e,t,n){var r=t.axis,i=nt(n.axisLabelShow,t.get(["axisLabel","show"]));if(!(!i||r.scale.isBlank())){var o=t.getModel("axisLabel"),s=o.get("margin"),l=r.getViewLabels(),u=(nt(n.labelRotate,o.get("rotate"))||0)*z/180,c=Y.innerTextLayout(n.rotation,u,n.labelDirection),v=t.getCategories&&t.getCategories(!0),h=[],f=Y.isLabelSilent(t),d=t.get("triggerEvent");return w(l,function(p,g){var y=r.scale.type==="ordinal"?r.scale.getRawOrdinalNumber(p.tickValue):p.tickValue,S=p.formattedLabel,x=p.rawLabel,M=o;if(v&&v[y]){var T=v[y];et(T)&&T.textStyle&&(M=new Me(T.textStyle,o,t.ecModel))}var b=M.getTextColor()||t.get(["axisLine","lineStyle","color"]),P=r.dataToCoord(y),_=new Lt({x:P,y:n.labelOffset+n.labelDirection*s,rotation:c.rotation,silent:f,z2:10+(p.level||0),style:Tt(M,{text:S,align:M.getShallow("align",!0)||c.textAlign,verticalAlign:M.getShallow("verticalAlign",!0)||M.getShallow("baseline",!0)||c.textVerticalAlign,fill:at(b)?b(r.type==="category"?x:r.type==="value"?y+"":y,g):b})});if(_.anid="label_"+y,d){var A=Y.makeAxisEventDataBase(t);A.targetType="axisLabel",A.value=x,A.tickIndex=g,r.type==="category"&&(A.dataIndex=y),xe(_).eventData=A}e.add(_),_.updateTransform(),h.push(_),a.add(_),_.decomposeTransform()}),h}}function nn(a,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return rn(t,a,e),t.seriesInvolved&&sn(t,a),t}function rn(a,e,t){var n=e.getComponent("tooltip"),r=e.getComponent("axisPointer"),i=r.get("link",!0)||[],o=[];w(t.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=it(s.model),u=a.coordSysAxesInfo[l]={};a.coordSysMap[l]=s;var c=s.model,v=c.getModel("tooltip",n);if(w(s.getAxes(),G(p,!1,null)),s.getTooltipAxes&&n&&v.get("show")){var h=v.get("trigger")==="axis",f=v.get(["axisPointer","type"])==="cross",d=s.getTooltipAxes(v.get(["axisPointer","axis"]));(h||f)&&w(d.baseAxes,G(p,f?"cross":!0,h)),f&&w(d.otherAxes,G(p,"cross",!1))}function p(g,y,S){var x=S.model.getModel("axisPointer",r),M=x.get("show");if(!(!M||M==="auto"&&!g&&!St(x))){y==null&&(y=x.get("triggerTooltip")),x=g?on(S,v,r,e,g,y):x;var T=x.get("snap"),b=x.get("triggerEmphasis"),P=it(S.model),_=y||T||S.type==="category",A=a.axesInfo[P]={key:P,axis:S,coordSys:s,axisPointerModel:x,triggerTooltip:y,triggerEmphasis:b,involveSeries:_,snap:T,useHandle:St(x),seriesModels:[],linkGroup:null};u[P]=A,a.seriesInvolved=a.seriesInvolved||_;var m=ln(i,S);if(m!=null){var L=o[m]||(o[m]={axesInfo:{}});L.axesInfo[P]=A,L.mapper=i[m].mapper,A.linkGroup=L}}}})}function on(a,e,t,n,r,i){var o=e.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};w(s,function(h){l[h]=we(o.get(h))}),l.snap=a.type!=="category"&&!!i,o.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),r==="cross"){var c=o.get(["label","show"]);if(u.show=c??!0,!i){var v=l.lineStyle=o.get("crossStyle");v&&rt(u,v.textStyle)}}return a.model.getModel("axisPointer",new Me(l,t,n))}function sn(a,e){e.eachSeries(function(t){var n=t.coordinateSystem,r=t.get(["tooltip","trigger"],!0),i=t.get(["tooltip","show"],!0);!n||r==="none"||r===!1||r==="item"||i===!1||t.get(["axisPointer","show"],!0)===!1||w(a.coordSysAxesInfo[it(n.model)],function(o){var s=o.axis;n.getAxis(s.dim)===s&&(o.seriesModels.push(t),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=t.getData().count())})})}function ln(a,e){for(var t=e.model,n=e.dim,r=0;r<a.length;r++){var i=a[r]||{};if(xt(i[n+"AxisId"],t.id)||xt(i[n+"AxisIndex"],t.componentIndex)||xt(i[n+"AxisName"],t.name))return r}}function xt(a,e){return a==="all"||J(a)&&ca(a,e)>=0||a===e}function un(a){var e=Ot(a);if(e){var t=e.axisPointerModel,n=e.axis.scale,r=t.option,i=t.get("status"),o=t.get("value");o!=null&&(o=n.parse(o));var s=St(t);i==null&&(r.status=s?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),r.value=o,s&&(r.status=e.axis.scale.isBlank()?"hide":"show")}}function Ot(a){var e=(a.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[it(a)]}function cn(a){var e=Ot(a);return e&&e.axisPointerModel}function St(a){return!!a.get(["handle","show"])}function it(a){return a.type+"||"+a.id}var Xt={},vn=function(a){Z(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,r,i){this.axisPointerClass&&un(t),a.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,r,!0)},e.prototype.updateAxisPointer=function(t,n,r,i){this._doUpdateAxisPointerClass(t,r,!1)},e.prototype.remove=function(t,n){var r=this._axisPointer;r&&r.remove(n)},e.prototype.dispose=function(t,n){this._disposeAxisPointer(n),a.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,n,r){var i=e.getAxisPointerClass(this.axisPointerClass);if(i){var o=cn(t);o?(this._axisPointer||(this._axisPointer=new i)).render(t,o,n,r):this._disposeAxisPointer(n)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,n){Xt[t]=n},e.getAxisPointerClass=function(t){return t&&Xt[t]},e.type="axis",e}(Se),q=Et(),$t=we,mt=Pe,fn=function(){function a(){this._dragging=!1,this.animationThreshold=15}return a.prototype.render=function(e,t,n,r){var i=t.get("value"),o=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=n,!(!r&&this._lastValue===i&&this._lastStatus===o)){this._lastValue=i,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,i,e,t,n);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=c;var v=this._moveAnimation=this.determineAnimation(e,t);if(!s)s=this._group=new wt,this.createPointerEl(s,u,e,t),this.createLabelEl(s,u,e,t),n.getZr().add(s);else{var h=G(Ut,t,v);this.updatePointerEl(s,u,h),this.updateLabelEl(s,u,h,t)}jt(s,t,!0),this._renderHandle(i)}},a.prototype.remove=function(e){this.clear(e)},a.prototype.dispose=function(e){this.clear(e)},a.prototype.determineAnimation=function(e,t){var n=t.get("animation"),r=e.axis,i=r.type==="category",o=t.get("snap");if(!o&&!i)return!1;if(n==="auto"||n==null){var s=this.animationThreshold;if(i&&r.getBandWidth()>s)return!0;if(o){var l=Ot(e).seriesDataCount,u=r.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return n===!0},a.prototype.makeElOption=function(e,t,n,r,i){},a.prototype.createPointerEl=function(e,t,n,r){var i=t.pointer;if(i){var o=q(e).pointerEl=new va[i.type]($t(t.pointer));e.add(o)}},a.prototype.createLabelEl=function(e,t,n,r){if(t.label){var i=q(e).labelEl=new Lt($t(t.label));e.add(i),Jt(i,r)}},a.prototype.updatePointerEl=function(e,t,n){var r=q(e).pointerEl;r&&t.pointer&&(r.setStyle(t.pointer.style),n(r,{shape:t.pointer.shape}))},a.prototype.updateLabelEl=function(e,t,n,r){var i=q(e).labelEl;i&&(i.setStyle(t.label.style),n(i,{x:t.label.x,y:t.label.y}),Jt(i,r))},a.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,n=this._api.getZr(),r=this._handle,i=t.getModel("handle"),o=t.get("status");if(!i.get("show")||!o||o==="hide"){r&&n.remove(r),this._handle=null;return}var s;this._handle||(s=!0,r=this._handle=fa(i.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){pa(u.event)},onmousedown:mt(this._onHandleDragMove,this,0,0),drift:mt(this._onHandleDragMove,this),ondragend:mt(this._onHandleDragEnd,this)}),n.add(r)),jt(r,t,!1),r.setStyle(i.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=i.get("size");J(l)||(l=[l,l]),r.scaleX=l[0]/2,r.scaleY=l[1]/2,ha(this,"_doDispatchAxisPointer",i.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,s)}},a.prototype._moveHandleToValue=function(e,t){Ut(this._axisPointerModel,!t&&this._moveAnimation,this._handle,bt(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},a.prototype._onHandleDragMove=function(e,t){var n=this._handle;if(n){this._dragging=!0;var r=this.updateHandleTransform(bt(n),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=r,n.stopAnimation(),n.attr(bt(r)),q(n).lastProp=null,this._doDispatchAxisPointer()}},a.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},a.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},a.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),n=this._group,r=this._handle;t&&n&&(this._lastGraphicKey=null,n&&t.remove(n),r&&t.remove(r),this._group=null,this._handle=null,this._payloadInfo=null),da(this,"_doDispatchAxisPointer")},a.prototype.doClear=function(){},a.prototype.buildLabel=function(e,t,n){return n=n||0,{x:e[n],y:e[1-n],width:t[n],height:t[1-n]}},a}();function Ut(a,e,t,n){Ce(q(t).lastProp,n)||(q(t).lastProp=n,e?ga(t,n,a):(t.stopAnimation(),t.attr(n)))}function Ce(a,e){if(et(a)&&et(e)){var t=!0;return w(e,function(n,r){t=t&&Ce(a[r],n)}),!!t}else return a===e}function Jt(a,e){a[e.get(["label","show"])?"show":"hide"]()}function bt(a){return{x:a.x||0,y:a.y||0,rotation:a.rotation||0}}function jt(a,e,t){var n=e.get("z"),r=e.get("zlevel");a&&a.traverse(function(i){i.type!=="group"&&(n!=null&&(i.z=n),r!=null&&(i.zlevel=r),i.silent=t)})}function hn(a){var e=a.get("type"),t=a.getModel(e+"Style"),n;return e==="line"?(n=t.getLineStyle(),n.fill=null):e==="shadow"&&(n=t.getAreaStyle(),n.stroke=null),n}function dn(a,e,t,n,r){var i=t.get("value"),o=pn(i,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),s=t.getModel("label"),l=ma(s.get("padding")||0),u=s.getFont(),c=ba(o,u),v=r.position,h=c.width+l[1]+l[3],f=c.height+l[0]+l[2],d=r.align;d==="right"&&(v[0]-=h),d==="center"&&(v[0]-=h/2);var p=r.verticalAlign;p==="bottom"&&(v[1]-=f),p==="middle"&&(v[1]-=f/2),gn(v,h,f,n);var g=s.get("backgroundColor");(!g||g==="auto")&&(g=e.get(["axisLine","lineStyle","color"])),a.label={x:v[0],y:v[1],style:Tt(s,{text:o,font:u,fill:s.getTextColor(),padding:l,backgroundColor:g}),z2:10}}function gn(a,e,t,n){var r=n.getWidth(),i=n.getHeight();a[0]=Math.min(a[0]+e,r)-e,a[1]=Math.min(a[1]+t,i)-t,a[0]=Math.max(a[0],0),a[1]=Math.max(a[1],0)}function pn(a,e,t,n,r){a=e.scale.parse(a);var i=e.scale.getLabel({value:a},{precision:r.precision}),o=r.formatter;if(o){var s={value:Oe(e,{value:a}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};w(n,function(l){var u=t.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,v=u&&u.getDataParams(c);v&&s.seriesData.push(v)}),$(o)?i=o.replace("{value}",i):at(o)&&(i=o(s))}return i}function De(a,e,t){var n=_a();return Ae(n,n,t.rotation),ya(n,n,t.position),xa([a.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],n)}function yn(a,e,t,n,r,i){var o=Y.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=r.get(["label","margin"]),dn(e,n,r,i,{position:De(n.axis,a,t),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function xn(a,e,t){return t=t||0,{x1:a[t],y1:a[1-t],x2:e[t],y2:e[1-t]}}function mn(a,e,t){return t=t||0,{x:a[t],y:a[1-t],width:e[t],height:e[1-t]}}function Jn(a,e,t,n,r,i){return{cx:a,cy:e,r0:t,r:n,startAngle:r,endAngle:i,clockwise:!0}}var bn=function(a){Z(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,n,r,i,o){var s=r.axis,l=s.grid,u=i.get("type"),c=Qt(l,s).getOtherAxis(s).getGlobalExtent(),v=s.toGlobalCoord(s.dataToCoord(n,!0));if(u&&u!=="none"){var h=hn(i),f=_n[u](s,v,c);f.style=h,t.graphicKey=f.type,t.pointer=f}var d=Wt(l.model,r);yn(n,t,d,r,i,o)},e.prototype.getHandleTransform=function(t,n,r){var i=Wt(n.axis.grid.model,n,{labelInside:!1});i.labelMargin=r.get(["handle","margin"]);var o=De(n.axis,t,i);return{x:o[0],y:o[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,n,r,i){var o=r.axis,s=o.grid,l=o.getGlobalExtent(!0),u=Qt(s,o).getOtherAxis(o).getGlobalExtent(),c=o.dim==="x"?0:1,v=[t.x,t.y];v[c]+=n[c],v[c]=Math.min(l[1],v[c]),v[c]=Math.max(l[0],v[c]);var h=(u[1]+u[0])/2,f=[h,h];f[c]=v[c];var d=[{verticalAlign:"middle"},{align:"center"}];return{x:v[0],y:v[1],rotation:t.rotation,cursorPoint:f,tooltipOption:d[c]}},e}(fn);function Qt(a,e){var t={};return t[e.dim+"AxisIndex"]=e.index,a.getCartesian(t)}var _n={line:function(a,e,t){var n=xn([e,t[0]],[e,t[1]],te(a));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(a,e,t){var n=Math.max(1,a.getBandWidth()),r=t[1]-t[0];return{type:"Rect",shape:mn([e-n/2,t[0]],[n,r],te(a))}}};function te(a){return a.dim==="x"?0:1}var Mn=function(a){Z(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(Ma),H=Et(),An=w;function wn(a,e,t){if(!Le.node){var n=e.getZr();H(n).records||(H(n).records={}),Sn(n,e);var r=H(n).records[a]||(H(n).records[a]={});r.handler=t}}function Sn(a,e){if(H(a).initialized)return;H(a).initialized=!0,t("click",G(ee,"click")),t("mousemove",G(ee,"mousemove")),t("globalout",Ln);function t(n,r){a.on(n,function(i){var o=Tn(e);An(H(a).records,function(s){s&&r(s,i,o.dispatchAction)}),Pn(o.pendings,e)})}}function Pn(a,e){var t=a.showTip.length,n=a.hideTip.length,r;t?r=a.showTip[t-1]:n&&(r=a.hideTip[n-1]),r&&(r.dispatchAction=null,e.dispatchAction(r))}function Ln(a,e,t){a.handler("leave",null,t)}function ee(a,e,t,n){e.handler(a,t,n)}function Tn(a){var e={showTip:[],hideTip:[]},t=function(n){var r=e[n.type];r?r.push(n):(n.dispatchAction=t,a.dispatchAction(n))};return{dispatchAction:t,pendings:e}}function ae(a,e){if(!Le.node){var t=e.getZr(),n=(H(t).records||{})[a];n&&(H(t).records[a]=null)}}var En=function(a){Z(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,r){var i=n.getComponent("tooltip"),o=t.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";wn("axisPointer",r,function(s,l,u){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(t,n){ae("axisPointer",n)},e.prototype.dispose=function(t,n){ae("axisPointer",n)},e.type="axisPointer",e}(Se);function kn(a,e){var t=[],n=a.seriesIndex,r;if(n==null||!(r=e.getSeriesByIndex(n)))return{point:[]};var i=r.getData(),o=Aa(i,a);if(o==null||o<0||J(o))return{point:[]};var s=i.getItemGraphicEl(o),l=r.coordinateSystem;if(r.getTooltipPosition)t=r.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(a.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),v=c.dim,h=u.dim,f=v==="x"||v==="radius"?1:0,d=i.mapDimension(h),p=[];p[f]=i.get(d,o),p[1-f]=i.get(i.getCalculationInfo("stackResultDimension"),o),t=l.dataToPoint(p)||[]}else t=l.dataToPoint(i.getValues(U(l.dimensions,function(y){return i.mapDimension(y)}),o))||[];else if(s){var g=s.getBoundingRect().clone();g.applyTransform(s.transform),t=[g.x+g.width/2,g.y+g.height/2]}return{point:t,el:s}}var ne=Et();function In(a,e,t){var n=a.currTrigger,r=[a.x,a.y],i=a,o=a.dispatchAction||Pe(t.dispatchAction,t),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){ft(r)&&(r=kn({seriesIndex:i.seriesIndex,dataIndex:i.dataIndex},e).point);var l=ft(r),u=i.axesInfo,c=s.axesInfo,v=n==="leave"||ft(r),h={},f={},d={list:[],map:{}},p={showPointer:G(Nn,f),showTooltip:G(Cn,d)};w(s.coordSysMap,function(y,S){var x=l||y.containPoint(r);w(s.coordSysAxesInfo[S],function(M,T){var b=M.axis,P=Hn(u,M);if(!v&&x&&(!u||P)){var _=P&&P.value;_==null&&!l&&(_=b.pointToData(r)),_!=null&&re(M,_,p,!1,h)}})});var g={};return w(c,function(y,S){var x=y.linkGroup;x&&!f[S]&&w(x.axesInfo,function(M,T){var b=f[T];if(M!==y&&b){var P=b.value;x.mapper&&(P=y.axis.scale.parse(x.mapper(P,ie(M),ie(y)))),g[y.key]=P}})}),w(g,function(y,S){re(c[S],y,p,!0,h)}),Dn(f,c,h),Bn(d,r,a,o),Rn(c,o,t),h}}function re(a,e,t,n,r){var i=a.axis;if(!(i.scale.isBlank()||!i.containData(e))){if(!a.involveSeries){t.showPointer(a,e);return}var o=On(e,a),s=o.payloadBatch,l=o.snapToValue;s[0]&&r.seriesIndex==null&&me(r,s[0]),!n&&a.snap&&i.containData(l)&&l!=null&&(e=l),t.showPointer(a,e,s),t.showTooltip(a,o,l)}}function On(a,e){var t=e.axis,n=t.dim,r=a,i=[],o=Number.MAX_VALUE,s=-1;return w(e.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(n),v,h;if(l.getAxisTooltipData){var f=l.getAxisTooltipData(c,a,t);h=f.dataIndices,v=f.nestestValue}else{if(h=l.getData().indicesOfNearest(c[0],a,t.type==="category"?.5:null),!h.length)return;v=l.getData().get(c[0],h[0])}if(!(v==null||!isFinite(v))){var d=a-v,p=Math.abs(d);p<=o&&((p<o||d>=0&&s<0)&&(o=p,s=d,r=v,i.length=0),w(h,function(g){i.push({seriesIndex:l.seriesIndex,dataIndexInside:g,dataIndex:l.getData().getRawIndex(g)})}))}}),{payloadBatch:i,snapToValue:r}}function Nn(a,e,t,n){a[e.key]={value:t,payloadBatch:n}}function Cn(a,e,t,n){var r=t.payloadBatch,i=e.axis,o=i.model,s=e.axisPointerModel;if(!(!e.triggerTooltip||!r.length)){var l=e.coordSys.model,u=it(l),c=a.map[u];c||(c=a.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},a.list.push(c)),c.dataByAxis.push({axisDim:i.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:n,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:r.slice()})}}function Dn(a,e,t){var n=t.axesInfo=[];w(e,function(r,i){var o=r.axisPointerModel.option,s=a[i];s?(!r.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!r.useHandle&&(o.status="hide"),o.status==="show"&&n.push({axisDim:r.axis.dim,axisIndex:r.axis.model.componentIndex,value:o.value})})}function Bn(a,e,t,n){if(ft(e)||!a.list.length){n({type:"hideTip"});return}var r=((a.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:a.list})}function Rn(a,e,t){var n=t.getZr(),r="axisPointerLastHighlights",i=ne(n)[r]||{},o=ne(n)[r]={};w(a,function(u,c){var v=u.axisPointerModel.option;v.status==="show"&&u.triggerEmphasis&&w(v.seriesDataIndices,function(h){var f=h.seriesIndex+" | "+h.dataIndex;o[f]=h})});var s=[],l=[];w(i,function(u,c){!o[c]&&l.push(u)}),w(o,function(u,c){!i[c]&&s.push(u)}),l.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function Hn(a,e){for(var t=0;t<(a||[]).length;t++){var n=a[t];if(e.axis.dim===n.axisDim&&e.axis.model.componentIndex===n.axisIndex)return n}}function ie(a){var e=a.axis.model,t={},n=t.axisDim=a.axis.dim;return t.axisIndex=t[n+"AxisIndex"]=e.componentIndex,t.axisName=t[n+"AxisName"]=e.name,t.axisId=t[n+"AxisId"]=e.id,t}function ft(a){return!a||a[0]==null||isNaN(a[0])||a[1]==null||isNaN(a[1])}function jn(a){vn.registerAxisPointerClass("CartesianAxisPointer",bn),a.registerComponentModel(Mn),a.registerComponentView(En),a.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!J(t)&&(e.axisPointer.link=[t])}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=nn(e,t)}),a.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},In)}export{Y as A,fn as B,Jn as C,xn as D,yn as E,De as F,mn as G,kt as H,ot as I,wa as J,zn as K,Sa as L,zt as O,ke as T,Oe as a,$a as b,Ua as c,Ka as d,Zn as e,kn as f,pn as g,Yn as h,jn as i,Kn as j,$n as k,Un as l,Ya as m,Ja as n,Gn as o,Wn as p,qn as q,wn as r,Vn as s,Wt as t,ae as u,vn as v,Xn as w,Wa as x,hn as y,dn as z};
