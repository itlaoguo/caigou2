import{d as ae,u as oe,C as ne,j as e,Z as p,W as T,r as f,l as V,g as le,X as se,h as m,c as b,o as u,a as o,b as ce,w as a,v as t,x as i,t as s,E as d,a0 as w,e as g,M as me,f as ue}from"./index-OLkvd68Y.js";import{g as ie}from"./list-mSrNO7GA.js";import{T as B}from"./index-igw7vt4f.js";const re={class:"list-common-table"},pe={class:"table-container"},de={key:0},_e={key:1},Te={key:2},fe={key:0,class:"payment-col"},be={key:1,class:"payment-col"},ye="index",ve="top",he=!0,ge=ae({__name:"index",setup(Ee){const D=oe(),M=ne(),O=[{value:p.FAIL,label:e("components.commonTable.contractStatusEnum.fail")},{value:p.AUDIT_PENDING,label:e("components.commonTable.contractStatusEnum.audit")},{value:p.EXEC_PENDING,label:e("components.commonTable.contractStatusEnum.pending")},{value:p.EXECUTING,label:e("components.commonTable.contractStatusEnum.executing")},{value:p.FINISH,label:e("components.commonTable.contractStatusEnum.finish")}],R=[{value:T.MAIN,label:e("components.commonTable.contractTypeEnum.main")},{value:T.SUB,label:e("components.commonTable.contractTypeEnum.sub")},{value:T.SUPPLEMENT,label:e("components.commonTable.contractTypeEnum.supplement")}],K=[{title:e("components.commonTable.contractName"),fixed:"left",width:280,ellipsis:!0,align:"left",colKey:"name"},{title:e("components.commonTable.contractStatus"),colKey:"status",width:160},{title:e("components.commonTable.contractNum"),width:160,ellipsis:!0,colKey:"no"},{title:e("components.commonTable.contractType"),width:160,ellipsis:!0,colKey:"contractType"},{title:e("components.commonTable.contractPayType"),width:160,ellipsis:!0,colKey:"paymentType"},{title:e("components.commonTable.contractAmount"),width:160,ellipsis:!0,colKey:"amount"},{align:"left",fixed:"right",width:160,colKey:"op",title:e("components.commonTable.operation")}],r=f({...{name:"",no:"",type:""}}),E=f({defaultPageSize:20,total:100,defaultCurrent:1}),S=f(!1),y=f([]),N=f(!1),L=async()=>{N.value=!0;try{const{list:c}=await ie();y.value=c,E.value={...E.value,total:c.length}}catch{}finally{N.value=!1}},v=f(-1),F=V(()=>{if(v.value>-1){const{name:c}=y.value[v.value];return`删除后，${c}的所有合同信息将被清空，且无法恢复`}return""}),P=()=>{v.value=-1},G=()=>{y.value.splice(v.value,1),E.value.total=y.value.length,S.value=!1,me.success("删除成功"),P()},X=()=>{P()};le(()=>{L()});const Y=c=>{v.value=c.row.rowIndex,S.value=!0},$=c=>{},W=()=>{M.push("/detail/base")},H=c=>{r.value},j=(c,l)=>{},q=(c,l)=>{},z=V(()=>({offsetTop:D.isUseTabsRouter?48:0,container:`.${se}-layout`}));return(c,l)=>{const I=m("t-input"),C=m("t-form-item"),_=m("t-col"),k=m("t-select"),x=m("t-row"),A=m("t-button"),Z=m("t-form"),h=m("t-tag"),U=m("t-link"),J=m("t-space"),Q=m("t-table"),ee=m("t-dialog");return u(),b("div",re,[o(Z,{ref:"form",data:r.value,"label-width":80,colon:"",onReset:$,onSubmit:H},{default:a(()=>[o(x,null,{default:a(()=>[o(_,{span:10},{default:a(()=>[o(x,{gutter:[24,24]},{default:a(()=>[o(_,{span:4},{default:a(()=>[o(C,{label:t(e)("components.commonTable.contractName"),name:"name"},{default:a(()=>[o(I,{modelValue:r.value.name,"onUpdate:modelValue":l[0]||(l[0]=n=>r.value.name=n),class:"form-item-content",type:"search",placeholder:t(e)("components.commonTable.contractNamePlaceholder"),style:{minWidth:"134px"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),o(_,{span:4},{default:a(()=>[o(C,{label:t(e)("components.commonTable.contractStatus"),name:"status"},{default:a(()=>[o(k,{modelValue:r.value.status,"onUpdate:modelValue":l[1]||(l[1]=n=>r.value.status=n),class:"form-item-content",options:O,placeholder:t(e)("components.commonTable.contractStatusPlaceholder"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),o(_,{span:4},{default:a(()=>[o(C,{label:t(e)("components.commonTable.contractNum"),name:"no"},{default:a(()=>[o(I,{modelValue:r.value.no,"onUpdate:modelValue":l[2]||(l[2]=n=>r.value.no=n),class:"form-item-content",placeholder:t(e)("components.commonTable.contractNumPlaceholder"),style:{minWidth:"134px"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),o(_,{span:4},{default:a(()=>[o(C,{label:t(e)("components.commonTable.contractType"),name:"type"},{default:a(()=>[o(k,{modelValue:r.value.type,"onUpdate:modelValue":l[3]||(l[3]=n=>r.value.type=n),style:{display:"inline-block"},class:"form-item-content",options:R,placeholder:t(e)("components.commonTable.contractTypePlaceholder"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),o(_,{span:2,class:"operation-container"},{default:a(()=>[o(A,{theme:"primary",type:"submit",style:{marginLeft:"var(--td-comp-margin-s)"}},{default:a(()=>[i(s(t(e)("components.commonTable.query")),1)]),_:1}),o(A,{type:"reset",variant:"base",theme:"default"},{default:a(()=>[i(s(t(e)("components.commonTable.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["data"]),ce("div",pe,[o(Q,{data:y.value,columns:K,"row-key":ye,"vertical-align":ve,hover:he,pagination:E.value,loading:N.value,"header-affixed-top":z.value,onPageChange:j,onChange:q},{status:a(({row:n})=>[n.status===t(p).FAIL?(u(),g(h,{key:0,theme:"danger",variant:"light"},{default:a(()=>[i(s(t(e)("components.commonTable.contractStatusEnum.fail")),1)]),_:1})):d("",!0),n.status===t(p).AUDIT_PENDING?(u(),g(h,{key:1,theme:"warning",variant:"light"},{default:a(()=>[i(s(t(e)("components.commonTable.contractStatusEnum.audit")),1)]),_:1})):d("",!0),n.status===t(p).EXEC_PENDING?(u(),g(h,{key:2,theme:"warning",variant:"light"},{default:a(()=>[i(s(t(e)("components.commonTable.contractStatusEnum.pending")),1)]),_:1})):d("",!0),n.status===t(p).EXECUTING?(u(),g(h,{key:3,theme:"success",variant:"light"},{default:a(()=>[i(s(t(e)("components.commonTable.contractStatusEnum.executing")),1)]),_:1})):d("",!0),n.status===t(p).FINISH?(u(),g(h,{key:4,theme:"success",variant:"light"},{default:a(()=>[i(s(t(e)("components.commonTable.contractStatusEnum.finish")),1)]),_:1})):d("",!0)]),contractType:a(({row:n})=>[n.contractType===t(T).MAIN?(u(),b("p",de,s(t(e)("pages.listBase.contractStatusEnum.fail")),1)):d("",!0),n.contractType===t(T).SUB?(u(),b("p",_e,s(t(e)("pages.listBase.contractStatusEnum.audit")),1)):d("",!0),n.contractType===t(T).SUPPLEMENT?(u(),b("p",Te,s(t(e)("pages.listBase.contractStatusEnum.pending")),1)):d("",!0)]),paymentType:a(({row:n})=>[n.paymentType===t(w).PAYMENT?(u(),b("div",fe,[i(s(t(e)("pages.listBase.pay"))+" ",1),o(B,{class:"dashboard-item-trend",type:"up"})])):d("",!0),n.paymentType===t(w).RECEIPT?(u(),b("div",be,[i(s(t(e)("pages.listBase.receive"))+" ",1),o(B,{class:"dashboard-item-trend",type:"down"})])):d("",!0)]),op:a(n=>[o(J,null,{default:a(()=>[o(U,{theme:"primary",onClick:l[4]||(l[4]=te=>W())},{default:a(()=>[i(s(t(e)("pages.listBase.detail")),1)]),_:1}),o(U,{theme:"danger",onClick:te=>Y(n)},{default:a(()=>[i(s(t(e)("pages.listBase.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","pagination","loading","header-affixed-top"]),o(ee,{visible:S.value,"onUpdate:visible":l[5]||(l[5]=n=>S.value=n),header:"确认删除当前所选合同？",body:F.value,"on-cancel":X,onConfirm:G},null,8,["visible","body"])])])}}}),Ie=ue(ge,[["__scopeId","data-v-7b3da77a"]]);export{Ie as C};
