import{a as E}from"./list-mSrNO7GA.js";import{P as F}from"./index-DhGyTu0l.js";import{d as j,r as n,l as q,g as G,h as s,c as d,o as i,b as v,a as l,E as b,w as p,x as H,t as J,v as x,j as y,e as z,a6 as K,F as V,i as O,M as Q,f as R}from"./index-OLkvd68Y.js";import{_ as W}from"./DialogForm.vue_vue_type_script_setup_true_lang-Ch5JD7Op.js";import"./more-CvW9xTnl.js";import"./shop-OwCUcoBK.js";import"./service-wx3J2hO2.js";import"./user-avatar-BkzRG7NA.js";import"./laptop-arVtzszR.js";const X={class:"list-card-operation"},Y={class:"search-input"},Z={class:"list-card-items"},ee={class:"list-card-pagination"},te={key:1,class:"list-card-loading"},ae={name:"ListCard"},oe=j({...ae,setup(ne){const C={name:"",status:"",description:"",type:"0",mark:"",amount:0},t=n({current:1,pageSize:12,total:0}),r=n(void 0),m=n([]),_=n(!0),S=async()=>{try{const{list:e}=await E();m.value=e,t.value={...t.value,total:e.length}}catch{}finally{_.value=!1}},h=q(()=>r.value?`确认删除后${r.value.name}的所有产品信息将被清空, 且无法恢复`:"");G(()=>{S()});const u=n(!1),g=n(""),c=n(!1),f=n({...C}),k=e=>{t.value.pageSize=e,t.value.current=1},D=e=>{t.value.current=e},P=e=>{c.value=!0,r.value=e},I=()=>{const{index:e}=r.value;m.value.splice(e-1,1),c.value=!1,Q.success("删除成功")},L=()=>{r.value=void 0,f.value={...C}},w=e=>{u.value=!0,f.value={name:e.name,status:e!=null&&e.isSetup?"1":"0",description:e.description,type:e.type.toString(),mark:"",amount:0}};return(e,o)=>{const B=s("t-button"),M=s("t-input"),N=s("t-col"),U=s("t-row"),A=s("t-pagination"),T=s("t-loading"),$=s("t-dialog");return i(),d("div",null,[v("div",X,[l(B,{onClick:o[0]||(o[0]=a=>u.value=!0)},{default:p(()=>[H(J(x(y)("pages.listCard.create")),1)]),_:1}),v("div",Y,[l(M,{modelValue:g.value,"onUpdate:modelValue":o[1]||(o[1]=a=>g.value=a),placeholder:x(y)("pages.listCard.placeholder"),clearable:""},{"suffix-icon":p(()=>[g.value===""?(i(),z(x(K),{key:0,size:"var(--td-comp-size-xxxs)"})):b("",!0)]),_:1},8,["modelValue","placeholder"])])]),l(W,{visible:u.value,"onUpdate:visible":o[2]||(o[2]=a=>u.value=a),data:f.value},null,8,["visible","data"]),t.value.total>0&&!_.value?(i(),d(V,{key:0},[v("div",Z,[l(U,{gutter:[16,16]},{default:p(()=>[(i(!0),d(V,null,O(m.value.slice(t.value.pageSize*(t.value.current-1),t.value.pageSize*t.value.current),a=>(i(),z(N,{key:a.index,lg:4,xs:6,xl:3},{default:p(()=>[l(F,{class:"list-card-item",product:a,onDeleteItem:P,onManageProduct:w},null,8,["product"])]),_:2},1024))),128))]),_:1})]),v("div",ee,[l(A,{modelValue:t.value.current,"onUpdate:modelValue":o[3]||(o[3]=a=>t.value.current=a),"page-size":t.value.pageSize,"onUpdate:pageSize":o[4]||(o[4]=a=>t.value.pageSize=a),total:t.value.total,"page-size-options":[12,24,36],onPageSizeChange:k,onCurrentChange:D},null,8,["modelValue","page-size","total"])])],64)):_.value?(i(),d("div",te,[l(T,{size:"large",text:"加载数据中..."})])):b("",!0),l($,{visible:c.value,"onUpdate:visible":o[5]||(o[5]=a=>c.value=a),header:"确认删除所选产品？",body:h.value,"on-cancel":L,onConfirm:I},null,8,["visible","body"])])}}}),me=R(oe,[["__scopeId","data-v-ed7d0ee3"]]);export{me as default};
