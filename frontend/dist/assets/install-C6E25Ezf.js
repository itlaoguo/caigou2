import{cb as J,P as we,_ as M,Y as ht,l as d,m as dt,Q as P,F as E,V as k,cc as re,cd as Se,ce as Me,a0 as I,ai as Re,$ as q,R as at,cf as Oe,cg as ie,ch as Ie,aK as ke,U as N,q as W,ci as De,aH as $,C as mt,K as yt,af as F,cj as Pe,aN as Ee,N as Le,ck as Be,aT as Ot,aU as It,h as ot,ac as Ve,Z as K,a6 as ze,I as j,aM as Ze,e as Ne,k as We,cl as kt,O as Ue,X as He,r as Dt,j as Pt,aB as Fe,cm as ae,cn as Ge,co as Ye,u as Xe,ad as $e,a5 as Et,cp as Lt,y as Bt,g as Ke}from"./installCanvasRenderer-jY-EmqBn.js";import{w as je,x as Qe}from"./install-B7QLEEXo.js";import{l as Je,m as qe}from"./install-D1NThLa7.js";var Vt="\0_ec_interaction_mutex";function tn(n,e,t){var r=xt(n);r[e]=t}function en(n,e,t){var r=xt(n),i=r[e];i===t&&(r[e]=null)}function mr(n,e){return!!xt(n)[e]}function xt(n){return n[Vt]||(n[Vt]={})}J({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},we);var nn={axisPointer:1,tooltip:1,brush:1};function rn(n,e,t){var r=e.getComponentByElement(n.topTarget),i=r&&r.coordinateSystem;return r&&r!==t&&!nn.hasOwnProperty(r.mainType)&&i&&i.model!==t}function oe(n,e,t,r,i,a){n=n||0;var o=t[1]-t[0];if(i!=null&&(i=z(i,[0,o])),a!=null&&(a=Math.max(a,i??0)),r==="all"){var s=Math.abs(e[1]-e[0]);s=z(s,[0,o]),i=a=z(s,[i,a]),r=0}e[0]=z(e[0],t),e[1]=z(e[1],t);var u=nt(e,r);e[r]+=n;var c=i||0,l=t.slice();u.sign<0?l[0]+=c:l[1]-=c,e[r]=z(e[r],l);var f;return f=nt(e,r),i!=null&&(f.sign!==u.sign||f.span<i)&&(e[1-r]=e[r]+u.sign*i),f=nt(e,r),a!=null&&f.span>a&&(e[1-r]=e[r]+f.sign*a),e}function nt(n,e){var t=n[e]-n[1-e];return{span:Math.abs(t),sign:t>0?-1:t<0?1:e?-1:1}}function z(n,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,n))}var B=!0,Y=Math.min,U=Math.max,an=Math.pow,on=1e4,sn=6,un=6,zt="globalPan",ln={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},cn={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Zt={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},fn=0,pn=function(n){M(e,n);function e(t){var r=n.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=t,r.group=new ht,r._uid="brushController_"+fn++,d(xn,function(i,a){this._handlers[a]=dt(i,this)},r),r}return e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var r=this._zr;this._enableGlobalPan||tn(r,zt,this._uid),d(this._handlers,function(i,a){r.on(a,i)}),this._brushType=t.brushType,this._brushOption=P(E(Zt),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;en(t,zt,this._uid),d(this._handlers,function(r,i){t.off(i,r)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var r=this._panels={};d(t,function(i){r[i.panelId]=E(i)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=r.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=k(t,function(v){return P(E(Zt),v,!0)});var r="\0-brush-index-",i=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new re(i,t,c,u).add(l).update(l).remove(f).execute(),this;function u(v,g){return(v.id!=null?v.id:r+g)+"-"+v.brushType}function c(v,g){return u(v.__brushOption,g)}function l(v,g){var p=t[v];if(g!=null&&i[g]===s)a[v]=i[g];else{var h=a[v]=g!=null?(i[g].__brushOption=p,i[g]):ue(o,se(o,p));_t(o,h)}}function f(v){i[v]!==s&&o.group.remove(i[v])}},e.prototype.unmount=function(){return this.enableBrush(!1),st(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(Se);function se(n,e){var t=tt[e.brushType].createCover(n,e);return t.__brushOption=e,ce(t,e),n.group.add(t),t}function ue(n,e){var t=bt(e);return t.endCreating&&(t.endCreating(n,e),ce(e,e.__brushOption)),e}function le(n,e){var t=e.__brushOption;bt(e).updateCoverShape(n,e,t.range,t)}function ce(n,e){var t=e.z;t==null&&(t=on),n.traverse(function(r){r.z=t,r.z2=t})}function _t(n,e){bt(e).updateCommon(n,e),le(n,e)}function bt(n){return tt[n.__brushOption.brushType]}function At(n,e,t){var r=n._panels;if(!r)return B;var i,a=n._transform;return d(r,function(o){o.isTargetByCursor(e,t,a)&&(i=o)}),i}function fe(n,e){var t=n._panels;if(!t)return B;var r=e.__brushOption.panelId;return r!=null?t[r]:B}function st(n){var e=n._covers,t=e.length;return d(e,function(r){n.group.remove(r)},n),e.length=0,!!t}function V(n,e){var t=k(n._covers,function(r){var i=r.__brushOption,a=E(i.range);return{brushType:i.brushType,panelId:i.panelId,range:a}});n.trigger("brush",{areas:t,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function vn(n){var e=n._track;if(!e.length)return!1;var t=e[e.length-1],r=e[0],i=t[0]-r[0],a=t[1]-r[1],o=an(i*i+a*a,.5);return o>sn}function pe(n){var e=n.length-1;return e<0&&(e=0),[n[0],n[e]]}function ve(n,e,t,r){var i=new ht;return i.add(new at({name:"main",style:Tt(t),silent:!0,draggable:!0,cursor:"move",drift:I(Nt,n,e,i,["n","s","w","e"]),ondragend:I(V,e,{isEnd:!0})})),d(r,function(a){i.add(new at({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:I(Nt,n,e,i,a),ondragend:I(V,e,{isEnd:!0})}))}),i}function ge(n,e,t,r){var i=r.brushStyle.lineWidth||0,a=U(i,un),o=t[0][0],s=t[1][0],u=o-i/2,c=s-i/2,l=t[0][1],f=t[1][1],v=l-a+i/2,g=f-a+i/2,p=l-o,h=f-s,_=p+i,b=h+i;D(n,e,"main",o,s,p,h),r.transformable&&(D(n,e,"w",u,c,a,b),D(n,e,"e",v,c,a,b),D(n,e,"n",u,c,_,a),D(n,e,"s",u,g,_,a),D(n,e,"nw",u,c,a,a),D(n,e,"ne",v,c,a,a),D(n,e,"sw",u,g,a,a),D(n,e,"se",v,g,a,a))}function ut(n,e){var t=e.__brushOption,r=t.transformable,i=e.childAt(0);i.useStyle(Tt(t)),i.attr({silent:!r,cursor:r?"move":"default"}),d([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=e.childOfName(a.join("")),s=a.length===1?lt(n,a[0]):hn(n,a);o&&o.attr({silent:!r,invisible:!r,cursor:r?cn[s]+"-resize":null})})}function D(n,e,t,r,i,a,o){var s=e.childOfName(t);s&&s.setShape(mn(Ct(n,e,[[r,i],[r+a,i+o]])))}function Tt(n){return q({strokeNoScale:!0},n.brushStyle)}function he(n,e,t,r){var i=[Y(n,t),Y(e,r)],a=[U(n,t),U(e,r)];return[[i[0],a[0]],[i[1],a[1]]]}function gn(n){return ie(n.group)}function lt(n,e){var t={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},i=Oe(t[e],gn(n));return r[i]}function hn(n,e){var t=[lt(n,e[0]),lt(n,e[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function Nt(n,e,t,r,i,a){var o=t.__brushOption,s=n.toRectRange(o.range),u=de(e,i,a);d(r,function(c){var l=ln[c];s[l[0]][l[1]]+=u[l[0]]}),o.range=n.fromRectRange(he(s[0][0],s[1][0],s[0][1],s[1][1])),_t(e,t),V(e,{isEnd:!1})}function dn(n,e,t,r){var i=e.__brushOption.range,a=de(n,t,r);d(i,function(o){o[0]+=a[0],o[1]+=a[1]}),_t(n,e),V(n,{isEnd:!1})}function de(n,e,t){var r=n.group,i=r.transformCoordToLocal(e,t),a=r.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function Ct(n,e,t){var r=fe(n,e);return r&&r!==B?r.clipPath(t,n._transform):E(t)}function mn(n){var e=Y(n[0][0],n[1][0]),t=Y(n[0][1],n[1][1]),r=U(n[0][0],n[1][0]),i=U(n[0][1],n[1][1]);return{x:e,y:t,width:r-e,height:i-t}}function yn(n,e,t){if(!(!n._brushType||_n(n,e.offsetX,e.offsetY))){var r=n._zr,i=n._covers,a=At(n,e,t);if(!n._dragging)for(var o=0;o<i.length;o++){var s=i[o].__brushOption;if(a&&(a===B||s.panelId===a.panelId)&&tt[s.brushType].contain(i[o],t[0],t[1]))return}a&&r.setCursorStyle("crosshair")}}function ct(n){var e=n.event;e.preventDefault&&e.preventDefault()}function ft(n,e,t){return n.childOfName("main").contain(e,t)}function me(n,e,t,r){var i=n._creatingCover,a=n._creatingPanel,o=n._brushOption,s;if(n._track.push(t.slice()),vn(n)||i){if(a&&!i){o.brushMode==="single"&&st(n);var u=E(o);u.brushType=Wt(u.brushType,a),u.panelId=a===B?null:a.panelId,i=n._creatingCover=se(n,u),n._covers.push(i)}if(i){var c=tt[Wt(n._brushType,a)],l=i.__brushOption;l.range=c.getCreatingRange(Ct(n,i,n._track)),r&&(ue(n,i),c.updateCommon(n,i)),le(n,i),s={isEnd:r}}}else r&&o.brushMode==="single"&&o.removeOnClick&&At(n,e,t)&&st(n)&&(s={isEnd:r,removeOnClick:!0});return s}function Wt(n,e){return n==="auto"?e.defaultBrushType:n}var xn={mousedown:function(n){if(this._dragging)Ut(this,n);else if(!n.target||!n.target.draggable){ct(n);var e=this.group.transformCoordToLocal(n.offsetX,n.offsetY);this._creatingCover=null;var t=this._creatingPanel=At(this,n,e);t&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(n){var e=n.offsetX,t=n.offsetY,r=this.group.transformCoordToLocal(e,t);if(yn(this,n,r),this._dragging){ct(n);var i=me(this,n,r,!1);i&&V(this,i)}},mouseup:function(n){Ut(this,n)}};function Ut(n,e){if(n._dragging){ct(e);var t=e.offsetX,r=e.offsetY,i=n.group.transformCoordToLocal(t,r),a=me(n,e,i,!0);n._dragging=!1,n._track=[],n._creatingCover=null,a&&V(n,a)}}function _n(n,e,t){var r=n._zr;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var tt={lineX:Ht(0),lineY:Ht(1),rect:{createCover:function(n,e){function t(r){return r}return ve({toRectRange:t,fromRectRange:t},n,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(n){var e=pe(n);return he(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(n,e,t,r){ge(n,e,t,r)},updateCommon:ut,contain:ft},polygon:{createCover:function(n,e){var t=new ht;return t.add(new Re({name:"main",style:Tt(e),silent:!0})),t},getCreatingRange:function(n){return n},endCreating:function(n,e){e.remove(e.childAt(0)),e.add(new Me({name:"main",draggable:!0,drift:I(dn,n,e),ondragend:I(V,n,{isEnd:!0})}))},updateCoverShape:function(n,e,t,r){e.childAt(0).setShape({points:Ct(n,e,t)})},updateCommon:ut,contain:ft}};function Ht(n){return{createCover:function(e,t){return ve({toRectRange:function(r){var i=[r,[0,100]];return n&&i.reverse(),i},fromRectRange:function(r){return r[n]}},e,t,[[["w"],["e"]],[["n"],["s"]]][n])},getCreatingRange:function(e){var t=pe(e),r=Y(t[0][n],t[1][n]),i=U(t[0][n],t[1][n]);return[r,i]},updateCoverShape:function(e,t,r,i){var a,o=fe(e,t);if(o!==B&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(n);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-n]]}var u=[r,a];n&&u.reverse(),ge(e,t,u,i)},updateCommon:ut,contain:ft}}function bn(n){return n=wt(n),function(e){return Ie(e,n)}}function An(n,e){return n=wt(n),function(t){var r=e??t,i=r?n.width:n.height,a=r?n.x:n.y;return[a,a+(i||0)]}}function Tn(n,e,t){var r=wt(n);return function(i,a){return r.contain(a[0],a[1])&&!rn(i,e,t)}}function wt(n){return ke.create(n)}var Ft=["x","y","radius","angle","single"],Cn=["cartesian2d","polar","singleAxis"];function wn(n){var e=n.get("coordinateSystem");return W(Cn,e)>=0}function L(n){return n+"Axis"}function Sn(n,e){var t=N(),r=[],i=N();n.eachComponent({mainType:"dataZoom",query:e},function(l){i.get(l.uid)||s(l)});var a;do a=!1,n.eachComponent("dataZoom",o);while(a);function o(l){!i.get(l.uid)&&u(l)&&(s(l),a=!0)}function s(l){i.set(l.uid,!0),r.push(l),c(l)}function u(l){var f=!1;return l.eachTargetAxis(function(v,g){var p=t.get(v);p&&p[g]&&(f=!0)}),f}function c(l){l.eachTargetAxis(function(f,v){(t.get(f)||t.set(f,[]))[v]=!0})}return r}function yr(n){var e=n.ecModel,t={infoList:[],infoMap:N()};return n.eachTargetAxis(function(r,i){var a=e.getComponent(L(r),i);if(a){var o=a.getCoordSysModel();if(o){var s=o.uid,u=t.infoMap.get(s);u||(u={model:o,axisModels:[]},t.infoList.push(u),t.infoMap.set(s,u)),u.axisModels.push(a)}}}),t}var rt=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},n}(),Mn=function(n){M(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return e.prototype.init=function(t,r,i){var a=Gt(t);this.settledOption=a,this.mergeDefaultAndTheme(t,i),this._doInit(a)},e.prototype.mergeOption=function(t){var r=Gt(t);P(this.option,t,!0),P(this.settledOption,r,!0),this._doInit(r)},e.prototype._doInit=function(t){var r=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var i=this.settledOption;d([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(r[a[0]]=i[a[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),r=this._targetAxisInfoMap=N(),i=this._fillSpecifiedTargetAxis(r);i?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var r=!1;return d(Ft,function(i){var a=this.getReferringComponents(L(i),De);if(a.specified){r=!0;var o=new rt;d(a.models,function(s){o.add(s.componentIndex)}),t.set(i,o)}},this),r},e.prototype._fillAutoTargetAxisByOrient=function(t,r){var i=this.ecModel,a=!0;if(a){var o=r==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});u(s,o)}if(a){var s=i.findComponents({mainType:"singleAxis",filter:function(l){return l.get("orient",!0)===r}});u(s,"single")}function u(c,l){var f=c[0];if(f){var v=new rt;if(v.add(f.componentIndex),t.set(l,v),a=!1,l==="x"||l==="y"){var g=f.getReferringComponents("grid",$).models[0];g&&d(c,function(p){f.componentIndex!==p.componentIndex&&g===p.getReferringComponents("grid",$).models[0]&&v.add(p.componentIndex)})}}}a&&d(Ft,function(c){if(a){var l=i.findComponents({mainType:L(c),filter:function(v){return v.get("type",!0)==="category"}});if(l[0]){var f=new rt;f.add(l[0].componentIndex),t.set(c,f),a=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(r){!t&&(t=r)},this),t==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var r=this._rangePropMode,i=this.get("rangeMode");d([["start","startValue"],["end","endValue"]],function(a,o){var s=t[a[0]]!=null,u=t[a[1]]!=null;s&&!u?r[o]="percent":!s&&u?r[o]="value":i?r[o]=i[o]:s&&(r[o]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(r,i){t==null&&(t=this.ecModel.getComponent(L(r),i))},this),t},e.prototype.eachTargetAxis=function(t,r){this._targetAxisInfoMap.each(function(i,a){d(i.indexList,function(o){t.call(r,a,o)})})},e.prototype.getAxisProxy=function(t,r){var i=this.getAxisModel(t,r);if(i)return i.__dzAxisProxy},e.prototype.getAxisModel=function(t,r){var i=this._targetAxisInfoMap.get(t);if(i&&i.indexMap[r])return this.ecModel.getComponent(L(t),r)},e.prototype.setRawRange=function(t){var r=this.option,i=this.settledOption;d([["start","startValue"],["end","endValue"]],function(a){(t[a[0]]!=null||t[a[1]]!=null)&&(r[a[0]]=i[a[0]]=t[a[0]],r[a[1]]=i[a[1]]=t[a[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var r=this.option;d(["start","startValue","end","endValue"],function(i){r[i]=t[i]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,r){if(t==null&&r==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(t,r).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var r,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],s=this._targetAxisInfoMap.get(o),u=0;u<s.indexList.length;u++){var c=this.getAxisProxy(o,s.indexList[u]);if(c.hostedBy(this))return c;r||(r=c)}return r},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(mt);function Gt(n){var e={};return d(["start","end","startValue","endValue","throttle"],function(t){n.hasOwnProperty(t)&&(e[t]=n[t])}),e}var Rn=function(n){M(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(Mn),On=function(n){M(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this.dataZoomModel=t,this.ecModel=r,this.api=i},e.type="dataZoom",e}(yt),In=function(n){M(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(On),Z=d,Yt=Pe,kn=function(){function n(e,t,r,i){this._dimName=e,this._axisIndex=t,this.ecModel=i,this._dataZoomModel=r}return n.prototype.hostedBy=function(e){return this._dataZoomModel===e},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(t){if(wn(t)){var r=L(this._dimName),i=t.getReferringComponents(r,$).models[0];i&&this._axisIndex===i.componentIndex&&e.push(t)}},this),e},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return E(this._minMaxSpan)},n.prototype.calculateDataWindow=function(e){var t=this._dataExtent,r=this.getAxisModel(),i=r.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],u=[],c;Z(["start","end"],function(v,g){var p=e[v],h=e[v+"Value"];a[g]==="percent"?(p==null&&(p=o[g]),h=i.parse(F(p,o,t))):(c=!0,h=h==null?t[g]:i.parse(h),p=F(h,t,o)),u[g]=h==null||isNaN(h)?t[g]:h,s[g]=p==null||isNaN(p)?o[g]:p}),Yt(u),Yt(s);var l=this._minMaxSpan;c?f(u,s,t,o,!1):f(s,u,o,t,!0);function f(v,g,p,h,_){var b=_?"Span":"ValueSpan";oe(0,v,p,"all",l["min"+b],l["max"+b]);for(var y=0;y<2;y++)g[y]=F(v[y],p,h,!0),_&&(g[y]=i.parse(g[y]))}return{valueWindow:u,percentWindow:s}},n.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=Dn(this,this._dimName,t),this._updateMinMaxSpan();var r=this.calculateDataWindow(e.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(e,t){if(e!==this._dataZoomModel)return;var r=this._dimName,i=this.getTargetSeriesModels(),a=e.get("filterMode"),o=this._valueWindow;if(a==="none")return;Z(i,function(u){var c=u.getData(),l=c.mapDimensionsAll(r);if(l.length){if(a==="weakFilter"){var f=c.getStore(),v=k(l,function(g){return c.getDimensionIndex(g)},c);c.filterSelf(function(g){for(var p,h,_,b=0;b<l.length;b++){var y=f.get(v[b],g),x=!isNaN(y),m=y<o[0],A=y>o[1];if(x&&!m&&!A)return!0;x&&(_=!0),m&&(p=!0),A&&(h=!0)}return _&&p&&h})}else Z(l,function(g){if(a==="empty")u.setData(c=c.map(g,function(h){return s(h)?h:NaN}));else{var p={};p[g]=o,c.selectRange(p)}});Z(l,function(g){c.setApproximateExtent(o,g)})}});function s(u){return u>=o[0]&&u<=o[1]}},n.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,r=this._dataExtent;Z(["min","max"],function(i){var a=t.get(i+"Span"),o=t.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=F(r[0]+o,r,[0,100],!0):a!=null&&(o=F(a,[0,100],r,!0)-r[0]),e[i+"Span"]=a,e[i+"ValueSpan"]=o},this)},n.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,r=this._valueWindow;if(t){var i=Ee(r,[0,500]);i=Math.min(i,20);var a=e.axis.scale.rawExtentInfo;t[0]!==0&&a.setDeterminedMinMax("min",+r[0].toFixed(i)),t[1]!==100&&a.setDeterminedMinMax("max",+r[1].toFixed(i)),a.freeze()}},n}();function Dn(n,e,t){var r=[1/0,-1/0];Z(t,function(o){je(r,o.getData(),e)});var i=n.getAxisModel(),a=Qe(i.axis.scale,i,r).calculate();return[a.min,a.max]}var Pn={getTargetSeries:function(n){function e(i){n.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var u=n.getComponent(L(o),s);i(o,s,u,a)})})}e(function(i,a,o,s){o.__dzAxisProxy=null});var t=[];e(function(i,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new kn(i,a,s,n),t.push(o.__dzAxisProxy))});var r=N();return d(t,function(i){d(i.getTargetSeriesModels(),function(a){r.set(a.uid,a)})}),r},overallReset:function(n,e){n.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(r,i){t.getAxisProxy(r,i).reset(t)}),t.eachTargetAxis(function(r,i){t.getAxisProxy(r,i).filterData(t,e)})}),n.eachComponent("dataZoom",function(t){var r=t.findRepresentativeAxisProxy();if(r){var i=r.getDataPercentWindow(),a=r.getDataValueWindow();t.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};function En(n){n.registerAction("dataZoom",function(e,t){var r=Sn(t,e);d(r,function(i){i.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var Xt=!1;function Ln(n){Xt||(Xt=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,Pn),En(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function Bn(n){n.registerComponentModel(Rn),n.registerComponentView(In),Ln(n)}var O=function(){function n(){}return n}(),ye={};function G(n,e){ye[n]=e}function xe(n){return ye[n]}var Vn=function(n){M(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){n.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;d(this.option.feature,function(r,i){var a=xe(i);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(t)),P(r,a.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(mt),zn=function(n){M(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i,a){var o=this.group;if(o.removeAll(),!t.get("show"))return;var s=+t.get("itemSize"),u=t.get("orient")==="vertical",c=t.get("feature")||{},l=this._features||(this._features={}),f=[];d(c,function(p,h){f.push(h)}),new re(this._featureNames||[],f).add(v).update(v).remove(I(v,null)).execute(),this._featureNames=f;function v(p,h){var _=f[p],b=f[h],y=c[_],x=new Le(y,t,t.ecModel),m;if(a&&a.newTitle!=null&&a.featureName===_&&(y.title=a.newTitle),_&&!b){if(Zn(_))m={onclick:x.option.onclick,featureName:_};else{var A=xe(_);if(!A)return;m=new A}l[_]=m}else if(m=l[b],!m)return;m.uid=Be("toolbox-feature"),m.model=x,m.ecModel=r,m.api=i;var T=m instanceof O;if(!_&&b){T&&m.dispose&&m.dispose(r,i);return}if(!x.get("show")||T&&m.unusable){T&&m.remove&&m.remove(r,i);return}g(x,m,_),x.setIconStatus=function(C,R){var w=this.option,S=this.iconPaths;w.iconStatus=w.iconStatus||{},w.iconStatus[C]=R,S[C]&&(R==="emphasis"?Ot:It)(S[C])},m instanceof O&&m.render&&m.render(x,r,i,a)}function g(p,h,_){var b=p.getModel("iconStyle"),y=p.getModel(["emphasis","iconStyle"]),x=h instanceof O&&h.getIcons?h.getIcons():p.get("icon"),m=p.get("title")||{},A,T;ot(x)?(A={},A[_]=x):A=x,ot(m)?(T={},T[_]=m):T=m;var C=p.iconPaths={};d(A,function(R,w){var S=Ve(R,{},{x:-s/2,y:-s/2,width:s,height:s});S.setStyle(b.getItemStyle());var Te=S.ensureState("emphasis");Te.style=y.getItemStyle();var X=new K({style:{text:T[w],align:y.get("textAlign"),borderRadius:y.get("textBorderRadius"),padding:y.get("textPadding"),fill:null},ignore:!0});S.setTextContent(X),ze({el:S,componentModel:t,itemName:w,formatterParamsExtra:{title:T[w]}}),S.__title=T[w],S.on("mouseover",function(){var Rt=y.getItemStyle(),Ce=u?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";X.setStyle({fill:y.get("textFill")||Rt.fill||Rt.stroke||"#000",backgroundColor:y.get("textBackgroundColor")}),S.setTextConfig({position:y.get("textPosition")||Ce}),X.ignore=!t.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){p.get(["iconStatus",w])!=="emphasis"&&i.leaveEmphasis(this),X.hide()}),(p.get(["iconStatus",w])==="emphasis"?Ot:It)(S),o.add(S),S.on("click",dt(h.onclick,h,r,i,w)),C[w]=S})}Je(o,t,i),o.add(qe(o.getBoundingRect(),t)),u||o.eachChild(function(p){var h=p.__title,_=p.ensureState("emphasis"),b=_.textConfig||(_.textConfig={}),y=p.getTextContent(),x=y&&y.ensureState("emphasis");if(x&&!j(x)&&h){var m=x.style||(x.style={}),A=Ze(h,K.makeFont(m)),T=p.x+o.x,C=p.y+o.y+s,R=!1;C+A.height>i.getHeight()&&(b.position="top",R=!0);var w=R?-5-A.height:s+10;T+A.width/2>i.getWidth()?(b.position=["100%",w],m.align="right"):T-A.width/2<0&&(b.position=[0,w],m.align="left")}})},e.prototype.updateView=function(t,r,i,a){d(this._features,function(o){o instanceof O&&o.updateView&&o.updateView(o.model,r,i,a)})},e.prototype.remove=function(t,r){d(this._features,function(i){i instanceof O&&i.remove&&i.remove(t,r)}),this.group.removeAll()},e.prototype.dispose=function(t,r){d(this._features,function(i){i instanceof O&&i.dispose&&i.dispose(t,r)})},e.type="toolbox",e}(yt);function Zn(n){return n.indexOf("my")===0}var Nn=function(n){M(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){var i=this.model,a=i.get("name")||t.get("title.0.text")||"echarts",o=r.getZr().painter.getType()==="svg",s=o?"svg":i.get("type",!0)||"png",u=r.getConnectedDataURL({type:s,backgroundColor:i.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),c=Ne.browser;if(j(MouseEvent)&&(c.newEdge||!c.ie&&!c.edge)){var l=document.createElement("a");l.download=a+"."+s,l.target="_blank",l.href=u;var f=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});l.dispatchEvent(f)}else if(window.navigator.msSaveOrOpenBlob||o){var v=u.split(","),g=v[0].indexOf("base64")>-1,p=o?decodeURIComponent(v[1]):v[1];g&&(p=window.atob(p));var h=a+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var _=p.length,b=new Uint8Array(_);_--;)b[_]=p.charCodeAt(_);var y=new Blob([b]);window.navigator.msSaveOrOpenBlob(y,h)}else{var x=document.createElement("iframe");document.body.appendChild(x);var m=x.contentWindow,A=m.document;A.open("image/svg+xml","replace"),A.write(p),A.close(),m.focus(),A.execCommand("SaveAs",!0,h),document.body.removeChild(x)}}else{var T=i.get("lang"),C='<body style="margin:0;"><img src="'+u+'" style="max-width:100%;" title="'+(T&&T[0]||"")+'" /></body>',R=window.open();R.document.write(C),R.document.title=a}},e.getDefaultOption=function(t){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},e}(O),$t="__ec_magicType_stack__",Wn=[["line","bar"],["stack"]],Un=function(n){M(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getIcons=function(){var t=this.model,r=t.get("icon"),i={};return d(t.get("type"),function(a){r[a]&&(i[a]=r[a])}),i},e.getDefaultOption=function(t){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},e.prototype.onclick=function(t,r,i){var a=this.model,o=a.get(["seriesIndex",i]);if(Kt[i]){var s={series:[]},u=function(f){var v=f.subType,g=f.id,p=Kt[i](v,g,f,a);p&&(q(p,f.option),s.series.push(p));var h=f.coordinateSystem;if(h&&h.type==="cartesian2d"&&(i==="line"||i==="bar")){var _=h.getAxesByScale("ordinal")[0];if(_){var b=_.dim,y=b+"Axis",x=f.getReferringComponents(y,$).models[0],m=x.componentIndex;s[y]=s[y]||[];for(var A=0;A<=m;A++)s[y][m]=s[y][m]||{};s[y][m].boundaryGap=i==="bar"}}};d(Wn,function(f){W(f,i)>=0&&d(f,function(v){a.setIconStatus(v,"normal")})}),a.setIconStatus(i,"emphasis"),t.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},u);var c,l=i;i==="stack"&&(c=P({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",i])!=="emphasis"&&(l="tiled")),r.dispatchAction({type:"changeMagicType",currentType:l,newOption:s,newTitle:c,featureName:"magicType"})}},e}(O),Kt={line:function(n,e,t,r){if(n==="bar")return P({id:e,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(n,e,t,r){if(n==="line")return P({id:e,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(n,e,t,r){var i=t.get("stack")===$t;if(n==="line"||n==="bar")return r.setIconStatus("stack",i?"normal":"emphasis"),P({id:e,stack:i?"":$t},r.get(["option","stack"])||{},!0)}};J({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,e){e.mergeOption(n.newOption)});var et=new Array(60).join("-"),H="	";function Hn(n){var e={},t=[],r=[];return n.eachRawSeries(function(i){var a=i.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;e[s]||(e[s]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),e[s].series.push(i)}else t.push(i)}else t.push(i)}),{seriesGroupByCategoryAxis:e,other:t,meta:r}}function Fn(n){var e=[];return d(n,function(t,r){var i=t.categoryAxis,a=t.valueAxis,o=a.dim,s=[" "].concat(k(t.series,function(g){return g.name})),u=[i.model.getCategories()];d(t.series,function(g){var p=g.getRawData();u.push(g.getRawData().mapArray(p.mapDimension(o),function(h){return h}))});for(var c=[s.join(H)],l=0;l<u[0].length;l++){for(var f=[],v=0;v<u.length;v++)f.push(u[v][l]);c.push(f.join(H))}e.push(c.join(`
`))}),e.join(`

`+et+`

`)}function Gn(n){return k(n,function(e){var t=e.getRawData(),r=[e.name],i=[];return t.each(t.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],s=t.getName(o),u=0;u<a-1;u++)i[u]=arguments[u];r.push((s?s+H:"")+i.join(H))}),r.join(`
`)}).join(`

`+et+`

`)}function Yn(n){var e=Hn(n);return{value:He([Fn(e.seriesGroupByCategoryAxis),Gn(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+et+`

`),meta:e.meta}}function Q(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Xn(n){var e=n.slice(0,n.indexOf(`
`));if(e.indexOf(H)>=0)return!0}var pt=new RegExp("["+H+"]+","g");function $n(n){for(var e=n.split(/\n+/g),t=Q(e.shift()).split(pt),r=[],i=k(t,function(u){return{name:u,data:[]}}),a=0;a<e.length;a++){var o=Q(e[a]).split(pt);r.push(o.shift());for(var s=0;s<o.length;s++)i[s]&&(i[s].data[a]=o[s])}return{series:i,categories:r}}function Kn(n){for(var e=n.split(/\n+/g),t=Q(e.shift()),r=[],i=0;i<e.length;i++){var a=Q(e[i]);if(a){var o=a.split(pt),s="",u=void 0,c=!1;isNaN(o[0])?(c=!0,s=o[0],o=o.slice(1),r[i]={name:s,value:[]},u=r[i].value):u=r[i]=[];for(var l=0;l<o.length;l++)u.push(+o[l]);u.length===1&&(c?r[i].value=u[0]:r[i]=u[0])}}return{name:t,data:r}}function jn(n,e){var t=n.split(new RegExp(`
*`+et+`
*`,"g")),r={series:[]};return d(t,function(i,a){if(Xn(i)){var o=$n(i),s=e[a],u=s.axisDim+"Axis";s&&(r[u]=r[u]||[],r[u][s.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{var o=Kn(i);r.series.push(o)}}),r}var Qn=function(n){M(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var i=r.getDom(),a=this.model;this._dom&&i.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),u=a.get("lang")||[];s.innerHTML=u[0]||a.get("title"),s.style.cssText="margin:10px 20px",s.style.color=a.get("textColor");var c=document.createElement("div"),l=document.createElement("textarea");c.style.cssText="overflow:auto";var f=a.get("optionToContent"),v=a.get("contentToOption"),g=Yn(t);if(j(f)){var p=f(r.getOption());ot(p)?c.innerHTML=p:We(p)&&c.appendChild(p)}else{l.readOnly=a.get("readOnly");var h=l.style;h.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",h.color=a.get("textColor"),h.borderColor=a.get("textareaBorderColor"),h.backgroundColor=a.get("textareaColor"),l.value=g.value,c.appendChild(l)}var _=g.meta,b=document.createElement("div");b.style.cssText="position:absolute;bottom:5px;left:0;right:0";var y="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",x=document.createElement("div"),m=document.createElement("div");y+=";background-color:"+a.get("buttonColor"),y+=";color:"+a.get("buttonTextColor");var A=this;function T(){i.removeChild(o),A._dom=null}kt(x,"click",T),kt(m,"click",function(){if(v==null&&f!=null||v!=null&&f==null){T();return}var C;try{j(v)?C=v(c,r.getOption()):C=jn(l.value,_)}catch(R){throw T(),new Error("Data view format error "+R)}C&&r.dispatchAction({type:"changeDataView",newOption:C}),T()}),x.innerHTML=u[1],m.innerHTML=u[2],m.style.cssText=x.style.cssText=y,!a.get("readOnly")&&b.appendChild(m),b.appendChild(x),o.appendChild(s),o.appendChild(c),o.appendChild(b),c.style.height=i.clientHeight-80+"px",i.appendChild(o),this._dom=o},e.prototype.remove=function(t,r){this._dom&&r.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.getDefaultOption=function(t){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},e}(O);function Jn(n,e){return k(n,function(t,r){var i=e&&e[r];if(Dt(i)&&!Pt(i)){var a=Dt(t)&&!Pt(t);a||(t={value:t});var o=i.name!=null&&t.name==null;return t=q(t,i),o&&delete t.name,t}else return t})}J({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,e){var t=[];d(n.newOption.series,function(r){var i=e.getSeriesByName(r.name)[0];if(!i)t.push(Ue({type:"scatter"},r));else{var a=i.get("data");t.push({name:r.name,data:Jn(r.data,a)})}}),e.mergeOption(q({series:t},n.newOption))});var _e=d,be=Fe();function qn(n,e){var t=St(n);_e(e,function(r,i){for(var a=t.length-1;a>=0;a--){var o=t[a];if(o[i])break}if(a<0){var s=n.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(s){var u=s.getPercentRange();t[0][i]={dataZoomId:i,start:u[0],end:u[1]}}}}),t.push(e)}function tr(n){var e=St(n),t=e[e.length-1];e.length>1&&e.pop();var r={};return _e(t,function(i,a){for(var o=e.length-1;o>=0;o--)if(i=e[o][a],i){r[a]=i;break}}),r}function er(n){be(n).snapshots=null}function nr(n){return St(n).length}function St(n){var e=be(n);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var rr=function(n){M(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){er(t),r.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return r},e}(O);J({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,e){e.resetOption("recreate")});var ir=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Ae=function(){function n(e,t,r){var i=this;this._targetInfoList=[];var a=jt(t,e);d(ar,function(o,s){(!r||!r.include||W(r.include,s)>=0)&&o(a,i._targetInfoList)})}return n.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(r,i,a){if((r.coordRanges||(r.coordRanges=[])).push(i),!r.coordRange){r.coordRange=i;var o=it[r.brushType](0,a,i);r.__rangeOffset={offset:te[r.brushType](o.values,r.range,[1,1]),xyMinMax:o.xyMinMax}}}),e},n.prototype.matchOutputRanges=function(e,t,r){d(e,function(i){var a=this.findTargetInfo(i,t);a&&a!==!0&&d(a.coordSyses,function(o){var s=it[i.brushType](1,o,i.range,!0);r(i,s.values,o,t)})},this)},n.prototype.setInputRanges=function(e,t){d(e,function(r){var i=this.findTargetInfo(r,t);if(r.range=r.range||[],i&&i!==!0){r.panelId=i.panelId;var a=it[r.brushType](0,i.coordSys,r.coordRange),o=r.__rangeOffset;r.range=o?te[r.brushType](a.values,o.offset,or(a.xyMinMax,o.xyMinMax)):a.values}},this)},n.prototype.makePanelOpts=function(e,t){return k(this._targetInfoList,function(r){var i=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:t?t(r):null,clipPath:bn(i),isTargetByCursor:Tn(i,e,r.coordSysModel),getLinearBrushOtherExtent:An(i)}})},n.prototype.controlSeries=function(e,t,r){var i=this.findTargetInfo(e,r);return i===!0||i&&W(i.coordSyses,t.coordinateSystem)>=0},n.prototype.findTargetInfo=function(e,t){for(var r=this._targetInfoList,i=jt(t,e),a=0;a<r.length;a++){var o=r[a],s=e.panelId;if(s){if(o.panelId===s)return o}else for(var u=0;u<Qt.length;u++)if(Qt[u](i,o))return o}return!0},n}();function vt(n){return n[0]>n[1]&&n.reverse(),n}function jt(n,e){return ae(n,e,{includeMainTypes:ir})}var ar={grid:function(n,e){var t=n.xAxisModels,r=n.yAxisModels,i=n.gridModels,a=N(),o={},s={};!t&&!r&&!i||(d(t,function(u){var c=u.axis.grid.model;a.set(c.id,c),o[c.id]=!0}),d(r,function(u){var c=u.axis.grid.model;a.set(c.id,c),s[c.id]=!0}),d(i,function(u){a.set(u.id,u),o[u.id]=!0,s[u.id]=!0}),a.each(function(u){var c=u.coordinateSystem,l=[];d(c.getCartesians(),function(f,v){(W(t,f.getAxis("x").model)>=0||W(r,f.getAxis("y").model)>=0)&&l.push(f)}),e.push({panelId:"grid--"+u.id,gridModel:u,coordSysModel:u,coordSys:l[0],coordSyses:l,getPanelRect:Jt.grid,xAxisDeclared:o[u.id],yAxisDeclared:s[u.id]})}))},geo:function(n,e){d(n.geoModels,function(t){var r=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:r,coordSyses:[r],getPanelRect:Jt.geo})})}},Qt=[function(n,e){var t=n.xAxisModel,r=n.yAxisModel,i=n.gridModel;return!i&&t&&(i=t.axis.grid.model),!i&&r&&(i=r.axis.grid.model),i&&i===e.gridModel},function(n,e){var t=n.geoModel;return t&&t===e.geoModel}],Jt={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var n=this.coordSys,e=n.getBoundingRect().clone();return e.applyTransform(ie(n)),e}},it={lineX:I(qt,0),lineY:I(qt,1),rect:function(n,e,t,r){var i=n?e.pointToData([t[0][0],t[1][0]],r):e.dataToPoint([t[0][0],t[1][0]],r),a=n?e.pointToData([t[0][1],t[1][1]],r):e.dataToPoint([t[0][1],t[1][1]],r),o=[vt([i[0],a[0]]),vt([i[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(n,e,t,r){var i=[[1/0,-1/0],[1/0,-1/0]],a=k(t,function(o){var s=n?e.pointToData(o,r):e.dataToPoint(o,r);return i[0][0]=Math.min(i[0][0],s[0]),i[1][0]=Math.min(i[1][0],s[1]),i[0][1]=Math.max(i[0][1],s[0]),i[1][1]=Math.max(i[1][1],s[1]),s});return{values:a,xyMinMax:i}}};function qt(n,e,t,r){var i=t.getAxis(["x","y"][n]),a=vt(k([0,1],function(s){return e?i.coordToData(i.toLocalCoord(r[s]),!0):i.toGlobalCoord(i.dataToCoord(r[s]))})),o=[];return o[n]=a,o[1-n]=[NaN,NaN],{values:a,xyMinMax:o}}var te={lineX:I(ee,0),lineY:I(ee,1),rect:function(n,e,t){return[[n[0][0]-t[0]*e[0][0],n[0][1]-t[0]*e[0][1]],[n[1][0]-t[1]*e[1][0],n[1][1]-t[1]*e[1][1]]]},polygon:function(n,e,t){return k(n,function(r,i){return[r[0]-t[0]*e[i][0],r[1]-t[1]*e[i][1]]})}};function ee(n,e,t,r){return[e[0]-r[n]*t[0],e[1]-r[n]*t[1]]}function or(n,e){var t=ne(n),r=ne(e),i=[t[0]/r[0],t[1]/r[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function ne(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}var gt=d,sr=Ye("toolbox-dataZoom_"),ur=function(n){M(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i,a){this._brushController||(this._brushController=new pn(i.getZr()),this._brushController.on("brush",dt(this._onBrush,this)).mount()),fr(t,r,this,a,i),cr(t,r)},e.prototype.onclick=function(t,r,i){lr[i].call(this)},e.prototype.remove=function(t,r){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,r){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var r=t.areas;if(!t.isEnd||!r.length)return;var i={},a=this.ecModel;this._brushController.updateCovers([]);var o=new Ae(Mt(this.model),a,{include:["grid"]});o.matchOutputRanges(r,a,function(c,l,f){if(f.type==="cartesian2d"){var v=c.brushType;v==="rect"?(s("x",f,l[0]),s("y",f,l[1])):s({lineX:"x",lineY:"y"}[v],f,l)}}),qn(a,i),this._dispatchZoomAction(i);function s(c,l,f){var v=l.getAxis(c),g=v.model,p=u(c,g,a),h=p.findRepresentativeAxisProxy(g).getMinMaxSpan();(h.minValueSpan!=null||h.maxValueSpan!=null)&&(f=oe(0,f.slice(),v.scale.getExtent(),0,h.minValueSpan,h.maxValueSpan)),p&&(i[p.id]={dataZoomId:p.id,startValue:f[0],endValue:f[1]})}function u(c,l,f){var v;return f.eachComponent({mainType:"dataZoom",subType:"select"},function(g){var p=g.getAxisModel(c,l.componentIndex);p&&(v=g)}),v}},e.prototype._dispatchZoomAction=function(t){var r=[];gt(t,function(i,a){r.push(E(i))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},e.getDefaultOption=function(t){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},e}(O),lr={zoom:function(){var n=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:n})},back:function(){this._dispatchZoomAction(tr(this.ecModel))}};function Mt(n){var e={xAxisIndex:n.get("xAxisIndex",!0),yAxisIndex:n.get("yAxisIndex",!0),xAxisId:n.get("xAxisId",!0),yAxisId:n.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function cr(n,e){n.setIconStatus("back",nr(e)>1?"emphasis":"normal")}function fr(n,e,t,r,i){var a=t._isZoomActive;r&&r.type==="takeGlobalCursor"&&(a=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),t._isZoomActive=a,n.setIconStatus("zoom",a?"emphasis":"normal");var o=new Ae(Mt(n),e,{include:["grid"]}),s=o.makePanelOpts(i,function(u){return u.xAxisDeclared&&!u.yAxisDeclared?"lineX":!u.xAxisDeclared&&u.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(s).enableBrush(a&&s.length?{brushType:"auto",brushStyle:n.getModel("brushStyle").getItemStyle()}:!1)}Ge("dataZoom",function(n){var e=n.getComponent("toolbox",0),t=["feature","dataZoom"];if(!e||e.get(t)==null)return;var r=e.getModel(t),i=[],a=Mt(r),o=ae(n,a);gt(o.xAxisModels,function(u){return s(u,"xAxis","xAxisIndex")}),gt(o.yAxisModels,function(u){return s(u,"yAxis","yAxisIndex")});function s(u,c,l){var f=u.componentIndex,v={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:sr+c+f};v[l]=f,i.push(v)}return i});function xr(n){n.registerComponentModel(Vn),n.registerComponentView(zn),G("saveAsImage",Nn),G("magicType",Un),G("dataView",Qn),G("dataZoom",ur),G("restore",rr),Xe(Bn)}var pr=function(n){M(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(mt),vr=function(n){M(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){if(this.group.removeAll(),!!t.get("show")){var a=this.group,o=t.getModel("textStyle"),s=t.getModel("subtextStyle"),u=t.get("textAlign"),c=$e(t.get("textBaseline"),t.get("textVerticalAlign")),l=new K({style:Et(o,{text:t.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),f=l.getBoundingRect(),v=t.get("subtext"),g=new K({style:Et(s,{text:v,fill:s.getTextColor(),y:f.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=t.get("link"),h=t.get("sublink"),_=t.get("triggerEvent",!0);l.silent=!p&&!_,g.silent=!h&&!_,p&&l.on("click",function(){Lt(p,"_"+t.get("target"))}),h&&g.on("click",function(){Lt(h,"_"+t.get("subtarget"))}),Bt(l).eventData=Bt(g).eventData=_?{componentType:"title",componentIndex:t.componentIndex}:null,a.add(l),v&&a.add(g);var b=a.getBoundingRect(),y=t.getBoxLayoutParams();y.width=b.width,y.height=b.height;var x=Ke(y,{width:i.getWidth(),height:i.getHeight()},t.get("padding"));u||(u=t.get("left")||t.get("right"),u==="middle"&&(u="center"),u==="right"?x.x+=x.width:u==="center"&&(x.x+=x.width/2)),c||(c=t.get("top")||t.get("bottom"),c==="center"&&(c="middle"),c==="bottom"?x.y+=x.height:c==="middle"&&(x.y+=x.height/2),c=c||"top"),a.x=x.x,a.y=x.y,a.markRedraw();var m={align:u,verticalAlign:c};l.setStyle(m),g.setStyle(m),b=a.getBoundingRect();var A=x.margin,T=t.getItemStyle(["color","opacity"]);T.fill=t.get("backgroundColor");var C=new at({shape:{x:b.x-A[3],y:b.y-A[0],width:b.width+A[1]+A[3],height:b.height+A[0]+A[2],r:t.get("borderRadius")},style:T,subPixelOptimize:!0,silent:!0});a.add(C)}},e.type="title",e}(yt);function _r(n){n.registerComponentModel(pr),n.registerComponentView(vr)}export{pn as B,Mn as D,O as T,xr as a,mr as b,Tn as c,bn as d,Ae as e,yr as f,On as g,Ln as h,_r as i,L as j,An as m,rn as o,G as r,oe as s};
