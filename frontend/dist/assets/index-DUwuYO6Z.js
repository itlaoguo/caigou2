import{d as Nt,u as At,C as Et,j as n,Z as m,W as t,r as T,l as C,g as _t,X as vt,h as d,c as A,o as u,b as U,a,x as i,w as e,t as p,v as l,e as _,E as y,a0 as G,M as O,f as Pt}from"./index-OLkvd68Y.js";import{T as K}from"./index-igw7vt4f.js";import{P as ft,c as F,a as gt,T as ht}from"./public-CddGFI_6.js";import bt from"./index-C6SEby_R.js";import Ut from"./ExamineAdd-_vrYnTu9.js";const Yt={key:0,class:"list-common-table"},St={class:"table-container"},Mt={key:0},Ct={key:1},It={key:2},Lt={key:0,class:"payment-col"},kt={key:1,class:"payment-col"},wt={key:1,class:"list-common-add"},Bt="id",xt="bottom",Rt=Nt({__name:"index",setup(Vt){const X=At(),$=Et(),H=[{value:m.FAIL,label:n("components.commonTable.contractStatusEnum.fail")},{value:m.AUDIT_PENDING,label:n("components.commonTable.contractStatusEnum.audit")},{value:m.EXEC_PENDING,label:n("components.commonTable.contractStatusEnum.pending")},{value:m.EXECUTING,label:n("components.commonTable.contractStatusEnum.executing")},{value:m.FINISH,label:n("components.commonTable.contractStatusEnum.finish")}],z=[{value:t.MAIN,label:n("components.commonTable.contractTypeEnum.main")},{value:t.SUB,label:n("components.commonTable.contractTypeEnum.sub")},{value:t.SUPPLEMENT,label:n("components.commonTable.contractTypeEnum.supplement")}],j=[{colKey:"row-select",type:"multiple",width:46,checkProps:{allowUncheck:!0}},{align:"center",colKey:"index",title:"序号",width:50,fixed:"left"},{title:n("components.commonTable.contractName"),fixed:"left",width:280,ellipsis:!0,align:"center",colKey:"name"},{align:"center",title:n("components.commonTable.contractStatus"),colKey:"status",width:160,filter:{type:"multiple",resetValue:[],list:[{label:"All",checkAll:!0},{label:"审核失败",value:0},{label:"待审核",value:1},{label:"待履行",value:2},{label:"履行中",value:3},{label:"已完成",value:4}],showConfirmAndReset:!0}},{align:"center",title:n("components.commonTable.contractNum"),width:160,ellipsis:!0,colKey:"no"},{align:"center",title:n("components.commonTable.contractType"),width:160,ellipsis:!0,colKey:"contractType"},{align:"center",title:n("components.commonTable.contractPayType"),width:160,ellipsis:!0,colKey:"paymentType"},{align:"center",title:n("components.commonTable.contractAmount"),width:160,ellipsis:!0,colKey:"amount",sortType:"all",sorter:!0},{align:"center",fixed:"right",width:160,colKey:"op",title:n("components.commonTable.operation")}],Y=T(!0),I=T(null),L=()=>{Y.value=!Y.value},W=T(null),N=T({...{name:"",no:"",type:""}});T(!0);const Z=async c=>{r.value=await gt(c,r)},q=(c,s)=>{r.value=[],r.value=[{id:"1",name:"合同速度建行发的尽快恢复健康",no:"123456789",status:0,contractType:t.MAIN,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"1000"},{id:"2",name:"合同速度快技术不到家",no:"987654321",status:1,contractType:t.SUB,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"2000"},{id:"3",name:"合同速度建行发的尽快恢复健康",no:"123456789",status:2,contractType:t.MAIN,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"1000"},{id:"4",name:"合同速度快技术不到家",no:"987654321",status:3,contractType:t.SUB,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"2000"},{id:"5",name:"合同速度建行发的尽快恢复健康",no:"123456789",status:4,contractType:t.MAIN,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"1000"},{id:"6",name:"合同速度快技术不到家",no:"987654321",status:1,contractType:t.SUB,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"2000"},{id:"7",name:"合同速度建行发的尽快恢复健康",no:"123456789",status:3,contractType:t.MAIN,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"1000"},{id:"8",name:"合同速度快技术不到家",no:"987654321",status:2,contractType:t.SUB,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"2000"},{id:"9",name:"合同速度建行发的尽快恢复健康",no:"123456789",status:1,contractType:t.MAIN,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"1000"},{id:"10",name:"合同速度快技术不到家",no:"987654321",status:0,contractType:t.SUB,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"2000"},{id:"11",name:"合同速度建行发的尽快恢复健康",no:"123456789",status:m.EXECUTING,contractType:t.MAIN,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"1000"},{id:"12",name:"合同速度快技术不到家",no:"987654321",status:0,contractType:t.SUB,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"2000"},{id:"13",name:"合同速度建行发的尽快恢复健康",no:"123456789",status:0,contractType:t.MAIN,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"1000"},{id:"14",name:"合同速度快技术不到家",no:"987654321",status:0,contractType:t.SUB,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"2000"},{id:"15",name:"合同速度建行发的尽快恢复健康",no:"123456789",status:0,contractType:t.MAIN,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"1000"},{id:"16",name:"合同速度快技术不到家",no:"987654321",status:0,contractType:t.SUB,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"2000"},{id:"17",name:"合同速度建行发的尽快恢复健康",no:"123456789",status:m.EXECUTING,contractType:t.MAIN,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"1000"},{id:"18",name:"合同速度快技术不到家",no:"987654321",status:m.EXEC_PENDING,contractType:t.SUB,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"2000"},{id:"19",name:"合同速度建行发的尽快恢复健康",no:"123456789",status:m.EXECUTING,contractType:t.MAIN,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"1000"}],r.value=ht(r.value,c),v.value.total=r.value.length},v=T({defaultPageSize:20,total:100,defaultCurrent:1,pageSizeOptions:ft}),h=T(!1),r=T(),J=()=>{I.value=999,L()},Q=C(()=>({placement:"top-right",fields:["name","no","status","contractType","paymentType","amount"],dialogProps:{preventScrollThrough:!0},buttonProps:!1})),S=T(!1),tt=async()=>{S.value=!0;try{r.value=[{id:"1",name:"合同速度建行发的尽快恢复健康",no:"123456789",status:0,contractType:t.MAIN,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"1000"},{id:"2",name:"合同速度快技术不到家",no:"987654321",status:1,contractType:t.SUB,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"2000"},{id:"3",name:"合同速度建行发的尽快恢复健康",no:"123456789",status:2,contractType:t.MAIN,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"1000"},{id:"4",name:"合同速度快技术不到家",no:"987654321",status:3,contractType:t.SUB,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"2000"},{id:"5",name:"合同速度建行发的尽快恢复健康",no:"123456789",status:4,contractType:t.MAIN,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"1000"},{id:"6",name:"合同速度快技术不到家",no:"987654321",status:1,contractType:t.SUB,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"2000"},{id:"7",name:"合同速度建行发的尽快恢复健康",no:"123456789",status:3,contractType:t.MAIN,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"1000"},{id:"8",name:"合同速度快技术不到家",no:"987654321",status:2,contractType:t.SUB,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"2000"},{id:"9",name:"合同速度建行发的尽快恢复健康",no:"123456789",status:1,contractType:t.MAIN,paymentType:"PAYMENT_TYPE.ANNUAL",amount:"1000"}],v.value={...v.value,total:r.value.length}}catch{}finally{S.value=!1}},P=T([]),et=(c,s)=>{c.length>0?(P.value=[],P.value=c[c.length-1]):P.value=c},k=T(null),nt=()=>{if(P.value.length==0)return O.warning("请先选择需要审批的工单");k.value.onSwticher()},f=T(-1),at=C(()=>{if(f.value>-1){const{name:c}=r.value[f.value];return`删除后，${c}的所有合同信息将被清空，且无法恢复`}return""}),w=()=>{f.value=-1},ot=()=>{r.value.splice(f.value,1),v.value.total=r.value.length,h.value=!1,O.success("删除成功"),w()},lt=()=>{w()};_t(()=>{tt()});const st=c=>{f.value=c.row.rowIndex,h.value=!0},ct=c=>{},ut=()=>{$.push("/detail/base")},B=c=>{N.value},mt=(c,s)=>{},it=(c,s)=>{};return C(()=>({offsetTop:X.isUseTabsRouter?48:0,container:`.${vt}-layout`})),(c,s)=>{const x=d("t-input"),E=d("t-col"),R=d("t-select"),b=d("t-button"),V=d("t-row"),M=d("t-icon"),pt=d("t-form"),g=d("t-tag"),D=d("t-link"),rt=d("t-space"),Tt=d("t-table"),dt=d("t-dialog");return u(),A("div",null,[Y.value?(u(),A("div",Yt,[s[9]||(s[9]=U("div",{class:"NavigationTitle"},[U("p"),i(" 合同数据 ")],-1)),a(pt,{ref:"form",data:N.value,"label-width":80,colon:"",onReset:ct,onSubmit:B},{default:e(()=>[a(V,null,{default:e(()=>[a(E,{span:10},{default:e(()=>[a(V,{gutter:[24,24]},{default:e(()=>[a(E,{span:1},{default:e(()=>[a(x,{modelValue:N.value.name,"onUpdate:modelValue":s[0]||(s[0]=o=>N.value.name=o),class:"form-item-content",type:"search",placeholder:"合同名称",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),a(E,{span:1},{default:e(()=>[a(R,{modelValue:N.value.status,"onUpdate:modelValue":s[1]||(s[1]=o=>N.value.status=o),class:"form-item-content",options:H,onChange:B,placeholder:"合同状态",clearable:""},null,8,["modelValue"])]),_:1}),a(E,{span:1},{default:e(()=>[a(x,{modelValue:N.value.no,"onUpdate:modelValue":s[2]||(s[2]=o=>N.value.no=o),class:"form-item-content",placeholder:"合同编号",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),a(E,{span:1},{default:e(()=>[a(R,{modelValue:N.value.type,"onUpdate:modelValue":s[3]||(s[3]=o=>N.value.type=o),style:{display:"inline-block"},class:"form-item-content",options:z,placeholder:"合同类型",clearable:""},null,8,["modelValue"])]),_:1}),a(E,{span:2},{default:e(()=>[a(b,{type:"reset",variant:"base",theme:"default"},{default:e(()=>[i(p(l(n)("components.commonTable.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),a(E,{span:2,class:"operation-container"},{default:e(()=>[l(F)("button")?(u(),_(b,{key:0,theme:"success",onClick:J},{icon:e(()=>[a(M,{name:"plus"})]),default:e(()=>[s[6]||(s[6]=i(" 添 加 "))]),_:1})):y("",!0),l(F)("shenpi")?(u(),_(b,{key:1,theme:"primary",onClick:nt},{icon:e(()=>[a(M,{name:"plus"})]),default:e(()=>[s[7]||(s[7]=i(" 审 批 "))]),_:1})):y("",!0),a(b,{theme:"warning"},{icon:e(()=>[a(M,{name:"download"})]),default:e(()=>[s[8]||(s[8]=i(" 导 出 "))]),_:1})]),_:1})]),_:1})]),_:1},8,["data"]),U("div",St,[a(Tt,{data:r.value,columns:j,"row-key":Bt,"vertical-align":xt,pagination:v.value,loading:S.value,maxHeight:"840",stripe:!0,onPageChange:mt,onChange:it,onSortChange:Z,onFilterChange:q,"column-controllter":Q.value,onSelectChange:et,"selected-row-keys":P.value},{index:e(({rowIndex:o})=>[U("span",null,p(o+1),1)]),status:e(({row:o})=>[o.status===l(m).FAIL?(u(),_(g,{key:0,theme:"danger",variant:"light"},{default:e(()=>[i(p(l(n)("components.commonTable.contractStatusEnum.fail")),1)]),_:1})):y("",!0),o.status===l(m).AUDIT_PENDING?(u(),_(g,{key:1,theme:"warning",variant:"light"},{default:e(()=>[i(p(l(n)("components.commonTable.contractStatusEnum.audit")),1)]),_:1})):y("",!0),o.status===l(m).EXEC_PENDING?(u(),_(g,{key:2,theme:"warning",variant:"light"},{default:e(()=>[i(p(l(n)("components.commonTable.contractStatusEnum.pending")),1)]),_:1})):y("",!0),o.status===l(m).EXECUTING?(u(),_(g,{key:3,theme:"success",variant:"light"},{default:e(()=>[i(p(l(n)("components.commonTable.contractStatusEnum.executing")),1)]),_:1})):y("",!0),o.status===l(m).FINISH?(u(),_(g,{key:4,theme:"success",variant:"light"},{default:e(()=>[i(p(l(n)("components.commonTable.contractStatusEnum.finish")),1)]),_:1})):y("",!0)]),contractType:e(({row:o})=>[o.contractType===l(t).MAIN?(u(),A("p",Mt,p(l(n)("pages.listBase.contractStatusEnum.fail")),1)):y("",!0),o.contractType===l(t).SUB?(u(),A("p",Ct,p(l(n)("pages.listBase.contractStatusEnum.audit")),1)):y("",!0),o.contractType===l(t).SUPPLEMENT?(u(),A("p",It,p(l(n)("pages.listBase.contractStatusEnum.pending")),1)):y("",!0)]),paymentType:e(({row:o})=>[o.paymentType===l(G).PAYMENT?(u(),A("div",Lt,[i(p(l(n)("pages.listBase.pay"))+" ",1),a(K,{class:"dashboard-item-trend",type:"up"})])):y("",!0),o.paymentType===l(G).RECEIPT?(u(),A("div",kt,[i(p(l(n)("pages.listBase.receive"))+" ",1),a(K,{class:"dashboard-item-trend",type:"down"})])):y("",!0)]),op:e(o=>[a(rt,null,{default:e(()=>[a(D,{theme:"primary",onClick:s[4]||(s[4]=yt=>ut())},{default:e(()=>[i(p(l(n)("pages.listBase.detail")),1)]),_:1}),a(D,{theme:"danger",onClick:yt=>st(o)},{default:e(()=>[i(p(l(n)("pages.listBase.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","pagination","loading","column-controllter","selected-row-keys"]),a(dt,{visible:h.value,"onUpdate:visible":s[5]||(s[5]=o=>h.value=o),header:"确认删除当前所选合同？",body:at.value,"on-cancel":lt,onConfirm:ot},null,8,["visible","body"]),a(Ut,{ref_key:"ExamineaddRef",ref:k},null,512)])])):(u(),A("div",wt,[a(bt,{ref_key:"AddConitem",ref:W,contractId:I.value,onaddswtich:L},null,8,["contractId"])]))])}}}),$t=Pt(Rt,[["__scopeId","data-v-9296b405"]]);export{$t as default};
