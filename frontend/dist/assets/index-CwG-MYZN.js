import{d as ee,u as te,j as t,r as g,l as w,g as ae,C as se,X as ne,h as d,c as _,o as i,a as o,w as s,b as I,E as c,x as u,t as n,v as e,a6 as le,a0 as P,W as k,e as y,Z as v,M as oe,f as ie}from"./index-OLkvd68Y.js";import{g as ce}from"./list-mSrNO7GA.js";import{T as A}from"./index-igw7vt4f.js";const ue={class:"left-operation-container"},re={key:0,class:"selected-count"},de={class:"search-input"},pe={key:0},ge={key:1},_e={key:2},me={key:0,class:"payment-col"},fe={key:1,class:"payment-col"},he={name:"ListBase"},ye=ee({...he,setup(ve){const K=te(),D=[{colKey:"row-select",type:"multiple",width:64,fixed:"left"},{title:t("pages.listBase.contractName"),align:"left",width:320,colKey:"name",fixed:"left"},{title:t("pages.listBase.contractStatus"),colKey:"status",width:160},{title:t("pages.listBase.contractNum"),width:160,ellipsis:!0,colKey:"no"},{title:t("pages.listBase.contractType"),width:160,ellipsis:!0,colKey:"contractType"},{title:t("pages.listBase.contractPayType"),width:160,ellipsis:!0,colKey:"paymentType"},{title:t("pages.listBase.contractAmount"),width:160,ellipsis:!0,colKey:"amount"},{title:t("pages.listBase.operation"),align:"left",fixed:"right",width:160,colKey:"op"}],f=g([]),T=g({defaultPageSize:20,total:100,defaultCurrent:1}),x=g(""),B=g(!1),U=async()=>{B.value=!0;try{const{list:l}=await ce();f.value=l,T.value={...T.value,total:l.length}}catch{}finally{B.value=!1}},m=g(-1),V=w(()=>{if(m.value>-1){const{name:l}=f.value[m.value];return`删除后，${l}的所有合同信息将被清空，且无法恢复`}return""});ae(()=>{U()});const C=g(!1),p=g([1,2]),E=se(),S=()=>{m.value=-1},M=()=>{f.value.splice(m.value,1),T.value.total=f.value.length;const l=p.value.indexOf(m.value);l>-1&&p.value.splice(l,1),C.value=!1,oe.success("删除成功"),S()},R=()=>{S()},L="index",O=l=>{p.value=l},Y=(l,r)=>{},$=(l,r)=>{},G=()=>{E.push("/detail/base")},X=()=>{E.push("/form/base")},j=l=>{m.value=l.rowIndex,C.value=!0},z=w(()=>({offsetTop:K.isUseTabsRouter?48:0,container:`.${ne}-layout`}));return(l,r)=>{const b=d("t-button"),F=d("t-input"),H=d("t-row"),h=d("t-tag"),N=d("t-link"),W=d("t-space"),Z=d("t-table"),q=d("t-card"),J=d("t-dialog");return i(),_("div",null,[o(q,{class:"list-card-container",bordered:!1},{default:s(()=>[o(H,{justify:"space-between"},{default:s(()=>[I("div",ue,[o(b,{onClick:X},{default:s(()=>[u(n(e(t)("pages.listBase.create")),1)]),_:1}),o(b,{variant:"base",theme:"default",disabled:!p.value.length},{default:s(()=>[u(n(e(t)("pages.listBase.export")),1)]),_:1},8,["disabled"]),p.value.length?(i(),_("p",re,n(e(t)("pages.listBase.select"))+" "+n(p.value.length)+" "+n(e(t)("pages.listBase.items")),1)):c("",!0)]),I("div",de,[o(F,{modelValue:x.value,"onUpdate:modelValue":r[0]||(r[0]=a=>x.value=a),placeholder:e(t)("pages.listBase.placeholder"),clearable:""},{"suffix-icon":s(()=>[o(e(le),{size:"16px"})]),_:1},8,["modelValue","placeholder"])])]),_:1}),o(Z,{data:f.value,columns:D,"row-key":L,"vertical-align":"top",hover:!0,pagination:T.value,"selected-row-keys":p.value,loading:B.value,"header-affixed-top":z.value,onPageChange:Y,onChange:$,onSelectChange:r[2]||(r[2]=a=>O(a))},{status:s(({row:a})=>[a.status===e(v).FAIL?(i(),y(h,{key:0,theme:"danger",variant:"light"},{default:s(()=>[u(n(e(t)("pages.listBase.contractStatusEnum.fail")),1)]),_:1})):c("",!0),a.status===e(v).AUDIT_PENDING?(i(),y(h,{key:1,theme:"warning",variant:"light"},{default:s(()=>[u(n(e(t)("pages.listBase.contractStatusEnum.audit")),1)]),_:1})):c("",!0),a.status===e(v).EXEC_PENDING?(i(),y(h,{key:2,theme:"warning",variant:"light"},{default:s(()=>[u(n(e(t)("pages.listBase.contractStatusEnum.pending")),1)]),_:1})):c("",!0),a.status===e(v).EXECUTING?(i(),y(h,{key:3,theme:"success",variant:"light"},{default:s(()=>[u(n(e(t)("pages.listBase.contractStatusEnum.executing")),1)]),_:1})):c("",!0),a.status===e(v).FINISH?(i(),y(h,{key:4,theme:"success",variant:"light"},{default:s(()=>[u(n(e(t)("pages.listBase.contractStatusEnum.finish")),1)]),_:1})):c("",!0)]),contractType:s(({row:a})=>[a.contractType===e(k).MAIN?(i(),_("p",pe,n(e(t)("pages.listBase.contractStatusEnum.fail")),1)):c("",!0),a.contractType===e(k).SUB?(i(),_("p",ge,n(e(t)("pages.listBase.contractStatusEnum.audit")),1)):c("",!0),a.contractType===e(k).SUPPLEMENT?(i(),_("p",_e,n(e(t)("pages.listBase.contractStatusEnum.pending")),1)):c("",!0)]),paymentType:s(({row:a})=>[a.paymentType===e(P).PAYMENT?(i(),_("div",me,[u(n(e(t)("pages.listBase.pay"))+" ",1),o(A,{class:"dashboard-item-trend",type:"up"})])):c("",!0),a.paymentType===e(P).RECEIPT?(i(),_("div",fe,[u(n(e(t)("pages.listBase.receive"))+" ",1),o(A,{class:"dashboard-item-trend",type:"down"})])):c("",!0)]),op:s(a=>[o(W,null,{default:s(()=>[o(N,{theme:"primary",onClick:r[1]||(r[1]=Q=>G())},{default:s(()=>[u(n(e(t)("pages.listBase.detail")),1)]),_:1}),o(N,{theme:"danger",onClick:Q=>j(a)},{default:s(()=>[u(n(e(t)("pages.listBase.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","pagination","selected-row-keys","loading","header-affixed-top"])]),_:1}),o(J,{visible:C.value,"onUpdate:visible":r[3]||(r[3]=a=>C.value=a),header:"确认删除当前所选合同？",body:V.value,"on-cancel":R,onConfirm:M},null,8,["visible","body"])])}}}),ke=ie(ye,[["__scopeId","data-v-c65e00c8"]]);export{ke as default};
