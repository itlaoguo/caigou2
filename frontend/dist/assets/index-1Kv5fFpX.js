import{j as p,d as J,r as d,g as Q,h as s,c as w,o as r,b as C,a,x as l,w as t,t as v,v as c,aa as E,E as u,W as M,e as g,m as X,M as Z,f as ee}from"./index-OLkvd68Y.js";import{_ as te}from"./add.vue_vue_type_script_setup_true_lang-Bq-Mt6nV.js";import{M as ne,d as ae}from"./menu-CDRUEs78.js";import{b as oe}from"./public-CddGFI_6.js";const le=[{title:"菜单名称",fixed:"left",width:280,ellipsis:!0,align:"left",colKey:"permission_name"},{align:"center",title:"图标",colKey:"icon",width:160},{align:"center",title:"排序",width:160,ellipsis:!0,colKey:"sort"},{align:"center",title:"权限标识",width:160,ellipsis:!0,colKey:"permission_mark"},{align:"center",title:"组件路径",width:160,ellipsis:!0,colKey:"component"},{align:"center",title:"组件名称",width:160,ellipsis:!0,colKey:"route"},{align:"center",title:"状态",width:160,ellipsis:!0,colKey:"hidden"},{align:"center",title:"类型",width:160,ellipsis:!0,colKey:"type"},{align:"center",fixed:"right",width:160,colKey:"op",title:p("components.commonTable.operation")}],se={class:"system-box"},ie={class:"list-common-table"},re={class:"table-container"},ce={key:0},de={key:1},ue={key:2},me={name:"menuPage"},pe=J({...me,setup(_e){const m=d({permission_name:""}),L="bottom",U=o=>{},y=d(!1),b=d(),F=()=>{i.value.onSwticher(),i.value.FormData.type=1,i.value.FormData.parent_id=0},K=d({childrenKey:"children",defaultExpandAll:!1}),x=d(!1),_=async o=>{x.value=!0;try{const h=await ne(o||{permission_name:""});b.value=oe(h.data),X(()=>{K.value.defaultExpandAll=!0}),b.value}catch{}finally{x.value=!1}},B=d(-1),N=()=>{B.value=-1},P=()=>{N()};Q(()=>{_()});const V=d(null),R=o=>{o.row.id,V.value=o.row.id,B.value=o.row.rowIndex,y.value=!0},$=async()=>{(await ae(V.value)).code==1e4&&(_(),Z.success("删除成功"),N(),y.value=!1)},O=()=>{m.value.permission_name,_(m.value)},j=()=>{m.value.permission_name="",_()},i=d(null),H=o=>{i.value.onSwticher(),i.value.getitemId(o.row.id)},W=o=>{i.value.onSwticher(),i.value,o.row.id,i.value.FormData.type=1,i.value.FormData.parent_id=o.row.id};return(o,e)=>{const h=s("t-input"),k=s("t-col"),D=s("t-button"),I=s("t-row"),T=s("t-icon"),Y=s("t-form"),f=s("t-tag"),S=s("t-link"),q=s("t-space"),z=s("t-enhanced-table"),G=s("t-dialog");return r(),w("div",se,[C("div",ie,[e[11]||(e[11]=C("div",{class:"NavigationTitle"},[C("p"),l(" 页面管理 ")],-1)),a(Y,{data:m.value,"label-width":80,colon:"",onReset:j},{default:t(()=>[a(I,null,{default:t(()=>[a(k,{span:10},{default:t(()=>[a(I,{gutter:[24,24]},{default:t(()=>[a(k,{span:2},{default:t(()=>[a(h,{modelValue:m.value.permission_name,"onUpdate:modelValue":e[0]||(e[0]=n=>m.value.permission_name=n),class:"form-item-content",type:"search",placeholder:"菜单名称",style:{width:"100%"},onEnter:O},null,8,["modelValue"])]),_:1}),a(k,{span:2},{default:t(()=>[a(D,{type:"reset",variant:"base",theme:"default"},{default:t(()=>[l(v(c(p)("components.commonTable.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),a(k,{span:2,class:"operation-container"},{default:t(()=>[a(D,{theme:"success",onClick:F},{icon:t(()=>[a(T,{name:"plus"})]),default:t(()=>[e[2]||(e[2]=l(" 添 加 "))]),_:1}),a(D,{theme:"warning"},{icon:t(()=>[a(T,{name:"download"})]),default:t(()=>[e[3]||(e[3]=l(" 导 出 "))]),_:1})]),_:1})]),_:1})]),_:1},8,["data"]),C("div",re,[a(z,{data:b.value,columns:c(le),"vertical-align":L,loading:x.value,maxHeight:"900",stripe:!0,onSortChange:U,"row-key":"id",tree:K.value},{hidden:t(({row:n})=>[n.hidden===1&&n.type!=3?(r(),g(f,{key:0,theme:"warning",variant:"light"},{default:t(()=>e[4]||(e[4]=[l(" 关闭 ")])),_:1})):u("",!0),n.hidden===2&&n.type!=3?(r(),g(f,{key:1,theme:"success",variant:"light"},{default:t(()=>e[5]||(e[5]=[l(" 开启 ")])),_:1})):u("",!0)]),type:t(({row:n})=>[n.type===1?(r(),g(f,{key:0,theme:"default",variant:"light"},{default:t(()=>e[6]||(e[6]=[l(" 目录 ")])),_:1})):u("",!0),n.type===2?(r(),g(f,{key:1,theme:"success",variant:"light"},{default:t(()=>e[7]||(e[7]=[l(" 页面 ")])),_:1})):u("",!0),n.type===3?(r(),g(f,{key:2,theme:"warning",variant:"light"},{default:t(()=>e[8]||(e[8]=[l(" 按钮 ")])),_:1})):u("",!0)]),icon:t(({row:n})=>[a(T,{name:n.icon},null,8,["name"])]),contractType:t(({row:n})=>[n.contractType===c(M).MAIN?(r(),w("p",ce,v(c(p)("pages.listBase.contractStatusEnum.fail")),1)):u("",!0),n.contractType===c(M).SUB?(r(),w("p",de,v(c(p)("pages.listBase.contractStatusEnum.audit")),1)):u("",!0),n.contractType===c(M).SUPPLEMENT?(r(),w("p",ue,v(c(p)("pages.listBase.contractStatusEnum.pending")),1)):u("",!0)]),op:t(n=>[a(q,null,{default:t(()=>[a(S,{theme:"primary",onClick:E(A=>H(n),["stop"])},{default:t(()=>e[9]||(e[9]=[l(" 编 辑")])),_:2},1032,["onClick"]),a(S,{theme:"primary",onClick:E(A=>W(n),["stop"])},{default:t(()=>e[10]||(e[10]=[l(" 新 增")])),_:2},1032,["onClick"]),a(S,{theme:"danger",onClick:E(A=>R(n),["stop"])},{default:t(()=>[l(v(c(p)("pages.listBase.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","columns","loading","tree"]),a(G,{visible:y.value,"onUpdate:visible":e[1]||(e[1]=n=>y.value=n),header:"确认删除当前所选数据吗？","on-cancel":P,onConfirm:$},null,8,["visible"]),a(te,{ref_key:"DictaddRef",ref:i,fetchData:_},null,512)])])])}}}),he=ee(pe,[["__scopeId","data-v-0ea5d7b9"]]);export{he as default};
