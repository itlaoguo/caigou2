import{d as oe,u as ae,C as le,j as a,Z as m,W as E,r,g as se,l as ce,X as ie,h as s,c as re,o as k,b as C,a as t,x as c,w as n,v as d,t as I,aa as S,e as B,E as K,M as ue,f as me}from"./index-OLkvd68Y.js";import{_ as de,S as pe,a as fe}from"./add.vue_vue_type_script_setup_true_lang-h2al96MX.js";import{_ as _e}from"./rbacpage.vue_vue_type_script_setup_true_lang-JZJMHkIE.js";const ve={class:"system-box"},ge={class:"list-common-table"},be={class:"table-container"},Te={name:"systemstation"},ye=oe({...Te,setup(he){const L=ae();le();const F=[{value:m.FAIL,label:a("components.commonTable.contractStatusEnum.fail")},{value:m.AUDIT_PENDING,label:a("components.commonTable.contractStatusEnum.audit")},{value:m.EXEC_PENDING,label:a("components.commonTable.contractStatusEnum.pending")},{value:m.EXECUTING,label:a("components.commonTable.contractStatusEnum.executing")},{value:m.FINISH,label:a("components.commonTable.contractStatusEnum.finish")}];E.MAIN,a("components.commonTable.contractTypeEnum.main"),E.SUB,a("components.commonTable.contractTypeEnum.sub"),E.SUPPLEMENT,a("components.commonTable.contractTypeEnum.supplement");const G=[{title:"岗位名称",fixed:"left",width:280,ellipsis:!0,align:"left",colKey:"department_name"},{align:"center",title:"排序",width:160,ellipsis:!0,colKey:"sort"},{align:"center",title:"状态",width:160,ellipsis:!0,colKey:"status"},{align:"center",title:"创建时间",width:160,ellipsis:!0,colKey:"created"},{align:"center",fixed:"right",width:160,colKey:"op",title:a("components.commonTable.operation")}],p=r(null),u=r({...{name:"",no:"",type:""}}),X="bottom",j=o=>{},f=r(!1),_=r(),D=()=>{p.value.onSwticher()},w=r(!1),H=o=>{const e=[],g=b=>{b.forEach(i=>{var T;e.push(i.id),(T=i.children)!=null&&T.length&&g(i.children)})};return g(o),e},v=r([]),U=r(null),W=()=>{U.value.onSwticher()},x=async()=>{w.value=!0;try{const o=await pe({});_.value=o.data,_.value,v.value=H(_.value),v.value}catch{}finally{w.value=!1}},V=r(-1),P=()=>{V.value=-1},q=async()=>{(await fe(R.value)).code==1e4&&(x(),ue.success("删除成功"),P(),f.value=!1)},Y=()=>{P()};se(()=>{x()});const R=r(null),Z=o=>{o.row.id,R.value=o.row.id,V.value=o.row.rowIndex,f.value=!0},z=o=>{},J=o=>{p.value.onSwticher(),p.value.getitemId(o.row.id)},A=o=>{u.value};return ce(()=>({offsetTop:L.isUseTabsRouter?48:0,container:`.${ie}-layout`})),(o,e)=>{const g=s("t-input"),b=s("t-form-item"),i=s("t-col"),T=s("t-select"),y=s("t-button"),M=s("t-row"),O=s("t-icon"),Q=s("t-form"),$=s("t-tag"),h=s("t-link"),ee=s("t-space"),te=s("t-enhanced-table"),ne=s("t-dialog");return k(),re("div",ve,[C("div",ge,[e[13]||(e[13]=C("div",{class:"NavigationTitle"},[C("p"),c(" 部门管理 ")],-1)),t(Q,{ref:"form",data:u.value,"label-width":80,colon:"",onReset:z,onSubmit:A},{default:n(()=>[t(M,null,{default:n(()=>[t(i,{span:10},{default:n(()=>[t(M,{gutter:[24,24]},{default:n(()=>[t(i,{span:2},{default:n(()=>[t(b,{label:"岗位名称",name:"name"},{default:n(()=>[t(g,{modelValue:u.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>u.value.name=l),class:"form-item-content",type:"search",placeholder:d(a)("components.commonTable.contractNamePlaceholder"),style:{minWidth:"134px"}},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(i,{span:2},{default:n(()=>[t(b,{label:"岗位状态",name:"status"},{default:n(()=>[t(T,{modelValue:u.value.status,"onUpdate:modelValue":e[1]||(e[1]=l=>u.value.status=l),class:"form-item-content",options:F,onChange:A,placeholder:d(a)("components.commonTable.contractStatusPlaceholder"),clearable:""},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(i,{span:2},{default:n(()=>[t(y,{theme:"primary",type:"submit",style:{marginLeft:"var(--td-comp-margin-s)"}},{default:n(()=>[c(I(d(a)("components.commonTable.query")),1)]),_:1}),t(y,{type:"reset",variant:"base",theme:"default"},{default:n(()=>[c(I(d(a)("components.commonTable.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(i,{span:2,class:"operation-container"},{default:n(()=>[t(y,{theme:"success",onClick:D},{icon:n(()=>[t(O,{name:"plus"})]),default:n(()=>[e[6]||(e[6]=c(" 添 加 "))]),_:1}),t(y,{theme:"warning"},{icon:n(()=>[t(O,{name:"download"})]),default:n(()=>[e[7]||(e[7]=c(" 导 出 "))]),_:1})]),_:1})]),_:1})]),_:1},8,["data"]),C("div",be,[t(te,{data:_.value,columns:G,"vertical-align":X,loading:w.value,maxHeight:"900",onSortChange:j,"row-key":"id",tree:{childrenKey:"children",expandTreeNodeOnClick:!0},expandedTreeNodes:v.value,"onUpdate:expandedTreeNodes":e[4]||(e[4]=l=>v.value=l)},{status:n(({row:l})=>[l.status==1?(k(),B($,{key:0,theme:"warning",variant:"light"},{default:n(()=>e[8]||(e[8]=[c(" 关闭 ")])),_:1})):K("",!0),l.status==0?(k(),B($,{key:1,theme:"success",variant:"light"},{default:n(()=>e[9]||(e[9]=[c(" 开启 ")])),_:1})):K("",!0)]),op:n(l=>[t(ee,null,{default:n(()=>[t(h,{theme:"primary",onClick:S(N=>J(l),["stop"])},{default:n(()=>e[10]||(e[10]=[c(" 修 改")])),_:2},1032,["onClick"]),t(h,{theme:"primary",onClick:e[2]||(e[2]=S(N=>D(),["stop"]))},{default:n(()=>e[11]||(e[11]=[c(" 新 增")])),_:1}),t(h,{theme:"primary",onClick:e[3]||(e[3]=S(N=>W(),["stop"]))},{default:n(()=>e[12]||(e[12]=[c(" 权限管理")])),_:1}),t(h,{theme:"danger",onClick:S(N=>Z(l),["stop"])},{default:n(()=>[c(I(d(a)("pages.listBase.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","loading","expandedTreeNodes"]),t(ne,{visible:f.value,"onUpdate:visible":e[5]||(e[5]=l=>f.value=l),header:"确认删除当前所选数据吗？","on-cancel":Y,onConfirm:q},null,8,["visible"]),t(de,{ref_key:"DictaddRef",ref:p,fetchData:x},null,512),t(_e,{ref_key:"RbacPageref",ref:U},null,512)])])])}}}),Ne=me(ye,[["__scopeId","data-v-2ff7ce05"]]);export{Ne as default};
