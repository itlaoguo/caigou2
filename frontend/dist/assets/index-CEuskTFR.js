import{d as v}from"./dayjs.min-Rb_lRoAu.js";import{d as le,C as ne,r as i,j as g,g as oe,h as n,c as se,o as d,b as k,a as t,x as c,w as a,v as V,t as K,e as r,E as m,M as R,f as ie}from"./index-OLkvd68Y.js";import{_ as ue}from"./ExamineAdd.vue_vue_type_script_setup_true_lang-8zRzm4tX.js";import{T as de}from"./public-CddGFI_6.js";const ce={class:"examine-page"},re={name:"examinedispose"},me=le({...re,setup(fe){const A=ne(),L=[{label:"我的审批",value:1},{label:"待审批",value:2},{label:"已审批",value:3}],_=i(1),U=s=>{_.value=s,s===1?o.value=[{id:"1",aa:"进货单审批",bb:"张三",cc:"2025-3-7 16:00:00",dd:"财务部",vv:"秦学海",status:0,ee:"",ff:"2025-3-10 16:00:00"},{id:"2",aa:"进货单审批",bb:"张三",cc:"2025-3-7 16:00:00",dd:"财务部",vv:"秦学海",status:1,ee:"",ff:"2025-3-10 16:00:00"},{id:"4",aa:"进货单审批",bb:"张三",cc:"2025-3-7 16:00:00",dd:"财务部",vv:"秦学海",status:3,ee:"缺少发票",ff:"2025-3-10 16:00:00"}]:s===2?o.value=[{id:"2",aa:"进货单审批",bb:"张三",cc:"2025-3-7 16:00:00",dd:"财务部",vv:"秦学海",status:1,ee:"",ff:"2025-3-10 16:00:00"}]:o.value=[{id:"4",aa:"进货单审批",bb:"张三",cc:"2025-3-7 16:00:00",dd:"财务部",vv:"秦学海",status:4,ee:"",ff:"2025-3-10 16:00:00"}]},S=i(1),B=[{align:"center",colKey:"index",title:"序号",width:50,fixed:"left"},{title:"审批类型",fixed:"left",width:280,ellipsis:!0,align:"center",colKey:"aa"},{align:"center",title:"发起人",width:160,ellipsis:!0,colKey:"bb"},{align:"center",title:"发起时间",width:160,ellipsis:!0,colKey:"cc"},{align:"center",title:"当前环节",width:160,ellipsis:!0,colKey:"dd"},{align:"center",title:"审批人",width:160,ellipsis:!0,colKey:"vv"},{align:"center",title:"审批状态",colKey:"status",width:160,filter:{type:"multiple",resetValue:[],list:[{label:"All",checkAll:!0},{label:"审批发起",value:0},{label:"待审批",value:1},{label:"驳回",value:3},{label:"审批完成",value:4}],showConfirmAndReset:!0}},{align:"center",title:"备注",width:160,ellipsis:!0,colKey:"ee"},{align:"center",fixed:"right",width:160,colKey:"op",title:g("components.commonTable.operation")}],$=i({最近7天:[v().subtract(6,"day").toDate(),v().toDate()],最近3天:[v().subtract(2,"day").toDate(),v().toDate()],今天:[v().toDate(),v().toDate()]}),p=i({defaultPageSize:20,total:100,defaultCurrent:1,pageSizeOptions:[10,20,50,100]}),u=i({name:[],no:"",type:""}),M=s=>{u.value},j=s=>{},F=(s,e)=>{o.value=[],o.value=[{id:"1",aa:"进货单审批",bb:"张三",cc:"2025-3-7 16:00:00",dd:"财务部",vv:"秦学海",status:0,ee:"",ff:"2025-3-10 16:00:00"},{id:"2",aa:"进货单审批",bb:"张三",cc:"2025-3-7 16:00:00",dd:"财务部",vv:"秦学海",status:1,ee:"",ff:"2025-3-10 16:00:00"},{id:"3",aa:"进货单审批",bb:"张三",cc:"2025-3-1 16:00:00",dd:"财务部",vv:"秦学海",status:2,ee:"超过审批时间",ff:"2025-3-7 14:00:00"},{id:"4",aa:"进货单审批",bb:"张三",cc:"2025-3-7 16:00:00",dd:"财务部",vv:"秦学海",status:3,ee:"缺少发票",ff:"2025-3-10 16:00:00"},{id:"4",aa:"进货单审批",bb:"张三",cc:"2025-3-7 16:00:00",dd:"财务部",vv:"秦学海",status:4,ee:"",ff:"2025-3-10 16:00:00"}],o.value=de(o.value,s),p.value.total=o.value.length},o=i([]),w=i(!1),I=(s,e)=>{},O=(s,e)=>{};oe(()=>{z()});const z=async()=>{w.value=!0;try{o.value=[{id:"1",aa:"进货单审批",bb:"张三",cc:"2025-3-7 16:00:00",dd:"财务部",vv:"秦学海",status:0,ee:"",ff:"2025-3-10 16:00:00"},{id:"2",aa:"进货单审批",bb:"张三",cc:"2025-3-7 16:00:00",dd:"财务部",vv:"秦学海",status:1,ee:"",ff:"2025-3-10 16:00:00"},{id:"3",aa:"进货单审批",bb:"张三",cc:"2025-3-1 16:00:00",dd:"财务部",vv:"秦学海",status:2,ee:"超过审批时间",ff:"2025-3-7 14:00:00"},{id:"4",aa:"进货单审批",bb:"张三",cc:"2025-3-7 16:00:00",dd:"财务部",vv:"秦学海",status:3,ee:"缺少发票",ff:"2025-3-10 16:00:00"},{id:"4",aa:"进货单审批",bb:"张三",cc:"2025-3-7 16:00:00",dd:"财务部",vv:"秦学海",status:4,ee:"",ff:"2025-3-10 16:00:00"}],p.value={...p.value,total:o.value.length}}catch{}finally{w.value=!1}},y=i(!1),W=()=>{p.value.total=o.value.length,y.value=!1,R.success("删除成功")},q=()=>{},H=()=>{y.value=!0},G=()=>{R.success("重新审批成功")},J=()=>{A.push("/detail/base")},E=i(null),Q=()=>{E.value.onSwticher()};return(s,e)=>{const X=n("t-tabs"),N=n("t-input"),D=n("t-form-item"),b=n("t-col"),Y=n("t-date-range-picker"),f=n("t-button"),P=n("t-row"),Z=n("t-form"),h=n("t-tag"),x=n("t-icon"),C=n("t-tooltip"),ee=n("t-space"),te=n("t-table"),ae=n("t-dialog");return d(),se("div",ce,[e[14]||(e[14]=k("div",{class:"NavigationTitle"},[k("p"),c(" 审批处理 ")],-1)),t(X,{modelValue:S.value,"onUpdate:modelValue":e[0]||(e[0]=l=>S.value=l),list:L,onChange:U},null,8,["modelValue"]),t(Z,{ref:"form",data:u.value,"label-width":80,colon:"",onReset:j,onSubmit:M,style:{margin:"20px 0"}},{default:a(()=>[t(P,null,{default:a(()=>[t(b,{span:12},{default:a(()=>[t(P,{gutter:[24,24]},{default:a(()=>[t(b,{span:2},{default:a(()=>[t(D,{label:"发起人",name:"name"},{default:a(()=>[t(N,{modelValue:u.value.name,"onUpdate:modelValue":e[1]||(e[1]=l=>u.value.name=l),class:"form-item-content",type:"search",placeholder:V(g)("components.commonTable.contractNamePlaceholder"),style:{minWidth:"134px"}},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(b,{span:2},{default:a(()=>[t(D,{label:"合同类型",name:"no"},{default:a(()=>[t(N,{modelValue:u.value.no,"onUpdate:modelValue":e[2]||(e[2]=l=>u.value.no=l),class:"form-item-content",placeholder:V(g)("components.commonTable.contractNumPlaceholder"),style:{minWidth:"134px"}},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(b,{span:2},{default:a(()=>[t(D,{label:"发起时间",name:"status"},{default:a(()=>[t(Y,{modelValue:u.value.name,"onUpdate:modelValue":e[3]||(e[3]=l=>u.value.name=l),presets:$.value},null,8,["modelValue","presets"])]),_:1})]),_:1}),t(b,{span:2},{default:a(()=>[t(f,{theme:"primary",type:"submit",style:{marginLeft:"var(--td-comp-margin-s)"}},{default:a(()=>[c(K(V(g)("components.commonTable.query")),1)]),_:1}),t(f,{type:"reset",variant:"base",theme:"default"},{default:a(()=>[c(K(V(g)("components.commonTable.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["data"]),t(te,{data:o.value,columns:B,"row-key":"id",pagination:p.value,loading:w.value,maxHeight:"900",onPageChange:I,onChange:O,onFilterChange:F},{index:a(({rowIndex:l})=>[k("span",null,K(l+1),1)]),status:a(({row:l})=>[l.status===0?(d(),r(h,{key:0,theme:"success",variant:"light"},{default:a(()=>e[9]||(e[9]=[c(" 审批发起 ")])),_:1})):m("",!0),l.status===1?(d(),r(h,{key:1,theme:"warning",variant:"light"},{default:a(()=>e[10]||(e[10]=[c(" 待审批 ")])),_:1})):m("",!0),l.status===3?(d(),r(h,{key:2,theme:"danger",variant:"light"},{default:a(()=>e[11]||(e[11]=[c(" 驳 回 ")])),_:1})):m("",!0),l.status===4?(d(),r(h,{key:3,theme:"success",variant:"light"},{default:a(()=>e[12]||(e[12]=[c(" 审批完成 ")])),_:1})):m("",!0)]),op:a(({row:l})=>[t(ee,null,{default:a(()=>[_.value===1||_.value===3?(d(),r(C,{key:0,content:"编辑",placement:"top",theme:"light"},{default:a(()=>[t(f,{variant:"text",onClick:e[4]||(e[4]=T=>J())},{default:a(()=>[t(x,{name:"view-list"})]),_:1})]),_:1})):m("",!0),_.value===2?(d(),r(C,{key:1,content:"审批",placement:"top",theme:"light"},{default:a(()=>[t(f,{variant:"text",onClick:e[5]||(e[5]=T=>Q())},{default:a(()=>[t(x,{name:"edit"})]),_:1})]),_:1})):m("",!0),l.status===2?(d(),r(C,{key:2,content:"重新审批",placement:"top",theme:"light"},{default:a(()=>[t(f,{variant:"text",onClick:e[6]||(e[6]=T=>G())},{default:a(()=>[t(x,{name:"refresh"})]),_:1})]),_:1})):m("",!0),t(C,{content:"删除",placement:"top",theme:"light"},{default:a(()=>[t(f,{variant:"text",onClick:e[7]||(e[7]=T=>H())},{default:a(()=>[t(x,{name:"delete"})]),_:1})]),_:1})]),_:2},1024)]),empty:a(()=>e[13]||(e[13]=[k("span",{style:{display:"flex","align-items":"center","justify-content":"center",height:"100px",color:"rgba(0, 0, 0, 0.26)"}}," 暂无数据-请刷新 ",-1)])),_:1},8,["data","pagination","loading"]),t(ae,{visible:y.value,"onUpdate:visible":e[8]||(e[8]=l=>y.value=l),header:"确认删除这条数据吗？","on-cancel":q,onConfirm:W},null,8,["visible"]),t(ue,{ref_key:"ExamineAddRef",ref:E},null,512)])}}}),_e=ie(me,[["__scopeId","data-v-0b7d96c2"]]);export{_e as default};
