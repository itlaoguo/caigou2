import{d as Z,r as i,j as l,g as $,h as n,c as d,o as c,a as s,w as a,b as P,x as p,t as u,E as _,v as ee,f as te}from"./index-OLkvd68Y.js";import{c as ae,d as le,e as se,f as oe,h as ie}from"./index-DiCg25Uy.js";const ne={class:"detail"},re={key:0,size:"medium",style:{"margin-left":"var(--td-comp-margin-s)"}},ue={key:1,size:"medium",style:{"margin-left":"var(--td-comp-margin-s)"}},de={key:2,size:"medium",style:{"margin-left":"var(--td-comp-margin-s)"}},ce={key:0,size:"medium",style:{"margin-left":"var(--td-comp-margin-s)"}},pe={key:1,size:"medium",style:{"margin-left":"var(--td-comp-margin-s)"}},me={key:2,size:"medium",style:{"margin-left":"var(--td-comp-margin-s)"}},ge=["src"],_e={name:"customerDetail"},fe=Z({..._e,setup(he,{expose:I}){const y=i(!1),b=i(1);i(!1);const m=i(0),g=i({}),r=i({customerId:m.value,page:1,pageSize:5}),B=[{title:l("pages.customerDetail.platformTable.column.platform"),width:160,colKey:"name"},{title:l("pages.customerDetail.platformTable.column.name"),width:220,colKey:"customer_name"},{title:l("pages.customerDetail.platformTable.column.gender"),width:160,ellipsis:!0,colKey:"gender"}],z=i([]),C=i({defaultPageSize:5,total:0,defaultCurrent:1}),q=async(t,e)=>{r.value={customerId:m.value,page:t.current,pageSize:t.pageSize},await A(r.value)},L=[{title:l("pages.customerDetail.orderTable.column.number"),align:"left",width:180,colKey:"number",fixed:"left"},{title:l("pages.customerDetail.orderTable.column.platform"),width:160,colKey:"platform_name"},{title:l("pages.customerDetail.orderTable.column.total"),width:160,ellipsis:!0,colKey:"total"},{title:l("pages.customerDetail.orderTable.column.pay_status"),width:160,ellipsis:!0,colKey:"pay_status"},{title:l("pages.customerDetail.orderTable.column.creator"),width:160,ellipsis:!0,colKey:"creator"},{title:l("pages.customerDetail.orderTable.column.created_at"),width:160,colKey:"created_at",sorter:!0},{title:l("pages.customerDetail.orderTable.column.updated_at"),align:"left",width:160,colKey:"updated_at",sorter:!0}],D=i([]),S=i({defaultPageSize:5,total:0,defaultCurrent:1}),N=async(t,e)=>{r.value={customerId:m.value,page:t.current,pageSize:t.pageSize},await K(r.value)},O=[{title:l("pages.customerDetail.shippingAddressTable.column.shippingAddress"),align:"left",width:320,fixed:"left"},{title:l("pages.customerDetail.shippingAddressTable.operate.detail"),align:"left",fixed:"right",width:160,colKey:"op"}],T=i([]),E=i({defaultPageSize:5,total:0,defaultCurrent:1}),U=async(t,e)=>{r.value={customerId:m.value,page:t.current,pageSize:t.pageSize},await k(r.value)},j=[{title:l("pages.customerDetail.productTable.column.image"),align:"left",width:180,colKey:"product_image",fixed:"left"},{title:l("pages.customerDetail.productTable.column.name"),width:160,colKey:"product_name"},{title:l("pages.customerDetail.productTable.column.number"),width:220,colKey:"product_sku"},{title:l("pages.customerDetail.productTable.column.platform"),width:160,ellipsis:!0,colKey:"platform_name"},{title:l("pages.customerDetail.productTable.column.number"),width:160,ellipsis:!0,colKey:"number"},{title:l("pages.customerDetail.productTable.column.quantity"),width:160,ellipsis:!0,colKey:"quantity"},{title:l("pages.customerDetail.productTable.column.buy_datetime"),width:160,colKey:"created_at",sorter:!0}],x=i([]),w=i({defaultPageSize:5,total:0,defaultCurrent:1}),M=async(t,e)=>{r.value={customerId:m.value,page:t.current,pageSize:t.pageSize},await V(r.value)};$(()=>{});const R=async t=>{const e=await ae(t);g.value={name:e.data.name,email:e.data.email,telephone:e.data.telephone,createBy:e.data.creator_name,createdAt:e.data.created_at,updatedAt:e.data.updated_at}},A=async t=>{const e=await le(t);z.value=e.data.items,C.value={defaultPageSize:e.data.pageSize,total:e.data.total,defaultCurrent:e.data.currentPage}},K=async t=>{const e=await se(t);D.value=e.data.items,S.value={defaultPageSize:e.data.pageSize,total:e.data.total,defaultCurrent:e.data.currentPage}},k=async t=>{const e=await oe(t);T.value=e.data.items,w.value={defaultPageSize:e.data.pageSize,total:e.data.total,defaultCurrent:e.data.currentPage}},V=async t=>{const e=await ie(t);x.value=e.data.items,w.value={defaultPageSize:e.data.pageSize,total:e.data.total,defaultCurrent:e.data.currentPage}},F=async()=>{b.value=1};return I({customerDetailVisible:y,customerId:m,getCustomer:R,getCustomerPlatforms:A,getCustomerOrders:K,getCustomerShippingAddresses:k,getCustomerPurchasedProducts:V}),(t,e)=>{const f=n("t-descriptions-item"),G=n("t-descriptions"),H=n("t-divider"),h=n("t-table"),v=n("t-tab-panel"),J=n("t-link"),Q=n("t-space"),W=n("t-icon"),X=n("t-tabs"),Y=n("t-dialog");return c(),d("div",null,[s(Y,{header:"用户详情",footer:!1,width:"60%",visible:y.value,"onUpdate:visible":e[1]||(e[1]=o=>y.value=o),"on-close":F,top:"10vh"},{default:a(()=>[P("div",ne,[s(G,{"label-style":{width:"120px",textAlign:"left"},column:3,"content-style":{textAlign:"left"}},{default:a(()=>[s(f,{label:"电子邮箱"},{default:a(()=>[p(u(g.value.email),1)]),_:1}),s(f,{label:"手机号码"},{default:a(()=>[p(u(g.value.telephone),1)]),_:1}),s(f,{label:"创建人"},{default:a(()=>[p(u(g.value.createBy),1)]),_:1}),s(f,{label:"注册日期"},{default:a(()=>[p(u(g.value.createdAt),1)]),_:1}),s(f,{label:"最近活动时间"},{default:a(()=>[p(u(g.value.updatedAt),1)]),_:1})]),_:1}),s(H),s(X,{size:"large",modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=o=>b.value=o)},{default:a(()=>[s(v,{value:1,label:"活动平台","destroy-on-hide":!1},{default:a(()=>[s(h,{columns:B,data:z.value,pagination:C.value,hover:!0,height:"300",stripe:!0,"row-key":"index",size:"large",onPageChange:q},{gender:a(({row:o})=>[o.gender==0?(c(),d("span",re,"未知")):_("",!0),o.gender==1?(c(),d("span",ue,"男")):_("",!0),o.gender==2?(c(),d("span",de,"女")):_("",!0)]),_:1},8,["data","pagination"])]),_:1}),s(v,{value:2,label:"订单记录","destroy-on-hide":!1},{default:a(()=>[s(h,{columns:L,data:D.value,pagination:S.value,hover:!0,height:"300",stripe:!0,"row-key":"index",size:"large",onPageChange:N},{pay_status:a(({row:o})=>[o.pay_status==0?(c(),d("span",ce,"未收款")):_("",!0),o.pay_status==1?(c(),d("span",pe,"已收款")):_("",!0),o.pay_status==2?(c(),d("span",me,"部分收款")):_("",!0)]),_:1},8,["data","pagination"])]),_:1}),s(v,{value:3,label:"产品购买记录","destroy-on-hide":!1},{default:a(()=>[s(h,{columns:j,data:x.value,pagination:w.value,hover:!0,height:"300",stripe:!0,"row-key":"index",size:"large",onPageChange:M},{product_image:a(({row:o})=>[P("img",{src:o.product_image,alt:"",srcset:"",width:"50",height:"50"},null,8,ge)]),quantity:a(({row:o})=>[p(u(o.quantity)+" "+u(o.unit),1)]),_:1},8,["data","pagination"])]),_:1}),s(v,{value:4,label:"收货地址","destroy-on-hide":!1},{default:a(()=>[s(h,{columns:O,data:T.value,height:"300",pagination:E.value,hover:!0,stripe:!0,"row-key":"shippingAddressIndex",size:"large",onPageChange:U},{shippingAddress:a(({row:o})=>e[2]||(e[2]=[P("span",null,null,-1)])),op:a(o=>[s(Q,null,{default:a(()=>[s(J,{theme:"primary"},{default:a(()=>[p(u(ee(l)("pages.customerDetail.shippingAddressTable.operate.detail")),1)]),_:1})]),_:1})]),"op-column":a(()=>[s(W,{name:"descending-order"})]),_:1},8,["data","pagination"])]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["visible"])])}}}),be=te(fe,[["__scopeId","data-v-cd53a76e"]]);export{be as default};
